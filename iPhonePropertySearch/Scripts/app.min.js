/**
 * almond 0.1.4 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*
 * jQuery Templates Plugin 1.0.0pre
 * http://github.com/jquery/jquery-tmpl
 * Requires jQuery 1.4.2
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */

// (c) Steven Sanderson - http://knockoutjs.com/

// License: MIT (http://www.opensource.org/licenses/mit-license.php)

/*!
 * iScroll v4.1.9 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */

// jquery.jsonp 2.1.4 (c)2010 Julian Aubourg | MIT License

(function(){var e,t,n;(function(r){function c(e,t){var n,r,i,s,o,u,f,l,c,h,p=t&&t.split("/"),d=a.map,v=d&&d["*"]||{};if(e&&e.charAt(0)==="."&&t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(l=0;l<e.length;l+=1){h=e[l];if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&&(e[2]===".."||e[0]===".."))break;l>0&&(e.splice(l-1,2),l-=2)}}e=e.join("/")}if((p||v)&&d){n=e.split("/");for(l=n.length;l>0;l-=1){r=n.slice(0,l).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=l;break}}}if(s)break;!u&&v&&v[r]&&(u=v[r],f=l)}!s&&u&&(s=u,o=f),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function h(e,t){return function(){return s.apply(r,l.call(arguments,0).concat([e,t]))}}function p(e){return function(t){return c(t,e)}}function d(e){return function(t){o[e]=t}}function v(e){if(u.hasOwnProperty(e)){var t=u[e];delete u[e],f[e]=!0,i.apply(r,t)}if(!o.hasOwnProperty(e))throw new Error("No "+e);return o[e]}function m(e,t){var n,r,i=e.indexOf("!");return i!==-1?(n=c(e.slice(0,i),t),e=e.slice(i+1),r=v(n),r&&r.normalize?e=r.normalize(e,p(t)):e=c(e,t)):e=c(e,t),{f:n?n+"!"+e:e,n:e,p:r}}function g(e){return function(){return a&&a.config&&a.config[e]||{}}}var i,s,o={},u={},a={},f={},l=[].slice;i=function(e,t,n,i){var s,a,l,c,p,y=[],b;i=i||e;if(typeof n=="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(p=0;p<t.length;p+=1){c=m(t[p],i),a=c.f;if(a==="require")y[p]=h(e);else if(a==="exports")y[p]=o[e]={},b=!0;else if(a==="module")s=y[p]={id:e,uri:"",exports:o[e],config:g(e)};else if(o.hasOwnProperty(a)||u.hasOwnProperty(a))y[p]=v(a);else if(c.p)c.p.load(c.n,h(i,!0),d(a),{}),y[p]=o[a];else if(!f[a])throw new Error(e+" missing "+a)}l=n.apply(o[e],y);if(e)if(s&&s.exports!==r&&s.exports!==o[e])o[e]=s.exports;else if(l!==r||!b)o[e]=l}else e&&(o[e]=n)},e=t=s=function(e,t,n,o,u){return typeof e=="string"?v(m(e,t).f):(e.splice||(a=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},typeof n=="function"&&(n=o,o=u),o?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},15),s)},s.config=function(e){return a=e,s},n=function(e,t,n){t.splice||(n=t,t=[]),u[e]=[e,t,n]},n.amd={jQuery:!0}})(),n("../almond",function(){}),n("lib/jquery",[],function(){return jQuery}),function(e){function c(t,n,r,o){var u={data:o||o===0||o===!1?o:n?n.data:{},_wrap:n?n._wrap:null,tmpl:null,parent:n||null,nodes:[],calls:b,nest:w,wrap:E,html:S,update:x};return t&&e.extend(u,t,{nodes:[],parent:n}),r&&(u.tmpl=r,u._ctnt=u._ctnt||u.tmpl(e,u),u.key=++a,(l.length?s:i)[a]=u),u}function h(t,r,i){var s,o=i?e.map(i,function(e){return typeof e=="string"?t.key?e.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+n+'="'+t.key+'" $2'):e:h(e,t,e._ctnt)}):t;return r?o:(o=o.join(""),o.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(t,n,r,i){s=e(r).get(),y(s),n&&(s=p(n).concat(s)),i&&(s=s.concat(p(i)))}),s?s:p(o))}function p(t){var n=document.createElement("div");return n.innerHTML=t,e.makeArray(n.childNodes)}function d(t){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+e.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(t,n,r,i,s,o,u){var a=e.tmpl.tag[r],f,l,c;if(!a)throw"Unknown template tag: "+r;return f=a._default||[],o&&!/\w$/.test(s)&&(s+=o,o=""),s?(s=m(s),u=u?","+m(u)+")":o?")":"",l=o?s.indexOf(".")>-1?s+m(o):"("+s+").call($item"+u:s,c=o?l:"(typeof("+s+")==='function'?("+s+").call($item):("+s+"))"):c=l=f.$1||"null",i=m(i),"');"+a[n?"close":"open"].split("$notnull_1").join(s?"typeof("+s+")!=='undefined' && ("+s+")!=null":"true").split("$1a").join(c).split("$1").join(l).split("$2").join(i||f.$2||"")+"__.push('"})+"');}return __;")}function v(t,n){t._wrap=h(t,!0,e.isArray(n)?n:[r.test(n)?n:e(n).html()]).join("")}function m(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function g(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function y(t){function v(t){function v(e){e+=r,p=l[e]=l[e]||c(p,i[p.parent.key+r]||p.parent)}var o,u=t,h,p,d;if(d=t.getAttribute(n)){while(u.parentNode&&(u=u.parentNode).nodeType===1&&!(o=u.getAttribute(n)));o!==d&&(u=u.parentNode?u.nodeType===11?0:u.getAttribute(n)||0:0,(p=i[d])||(p=s[d],p=c(p,i[u]||s[u]),p.key=++a,i[a]=p),f&&v(d)),t.removeAttribute(n)}else f&&(p=e.data(t,"tmplItem"))&&(v(p.key),i[p.key]=p,u=e.data(t.parentNode,"tmplItem"),u=u?u.key:0);if(p){h=p;while(h&&h.key!=u)h.nodes.push(t),h=h.parent;delete p._ctnt,delete p._wrap,e.data(t,"tmplItem",p)}}var r="_"+f,o,u,l={},h,p,d;for(h=0,p=t.length;h<p;h++){if((o=t[h]).nodeType!==1)continue;u=o.getElementsByTagName("*");for(d=u.length-1;d>=0;d--)v(u[d]);v(o)}}function b(e,t,n,r){if(!e)return l.pop();l.push({_:e,tmpl:t,item:this,data:n,options:r})}function w(t,n,r){return e.tmpl(e.template(t),n,r,this)}function E(t,n){var r=t.options||{};return r.wrapped=n,e.tmpl(e.template(t.tmpl),t.data,r,t.item)}function S(t,n){var r=this._wrap;return e.map(e(e.isArray(r)?r.join(""):r).filter(t||"*"),function(e){return n?e.innerText||e.textContent:e.outerHTML||g(e)})}function x(){var t=this.nodes;e.tmpl(null,null,null,this).insertBefore(t[0]),e(t).remove()}var t=e.fn.domManip,n="_tmplitem",r=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,i={},s={},o,u={key:0,data:{}},a=0,f=0,l=[];e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(r){var s=[],u=e(r),a,l,c,h,p=this.length===1&&this[0].parentNode;o=i||{};if(p&&p.nodeType===11&&p.childNodes.length===1&&u.length===1)u[n](this[0]),s=this;else{for(l=0,c=u.length;l<c;l++)f=l,a=(l>0?this.clone(!0):this).get(),e(u[l])[n](a),s=s.concat(a);f=0,s=this.pushStack(s,t,u.selector)}return h=o,o=null,e.tmpl.complete(h),s}}),e.fn.extend({tmpl:function(t,n,r){return e.tmpl(this[0],t,n,r)},tmplItem:function(){return e.tmplItem(this[0])},template:function(t){return e.template(t,this[0])},domManip:function(n,r,s){if(n[0]&&e.isArray(n[0])){var u=e.makeArray(arguments),a=n[0],l=a.length,c=0,h;while(c<l&&!(h=e.data(a[c++],"tmplItem")));h&&f&&(u[2]=function(t){e.tmpl.afterManip(this,t,s)}),t.apply(this,u)}else t.apply(this,arguments);return f=0,!o&&e.tmpl.complete(i),this}}),e.extend({tmpl:function(t,n,r,o){var a,f=!o;if(f)o=u,t=e.template[t]||e.template(null,t),s={};else if(!t)return t=o.tmpl,i[o.key]=o,o.nodes=[],o.wrapped&&v(o,o.wrapped),e(h(o,null,o.tmpl(e,o)));return t?(typeof n=="function"&&(n=n.call(o||{})),r&&r.wrapped&&v(r,r.wrapped),a=e.isArray(n)?e.map(n,function(e){return e?c(r,o,t,e):null}):[c(r,o,t,n)],f?e(h(o,null,a)):a):[]},tmplItem:function(t){var n;t instanceof e&&(t=t[0]);while(t&&t.nodeType===1&&!(n=e.data(t,"tmplItem"))&&(t=t.parentNode));return n||u},template:function(t,n){return n?(typeof n=="string"?n=d(n):n instanceof e&&(n=n[0]||{}),n.nodeType&&(n=e.data(n,"tmpl")||e.data(n,"tmpl",d(n.innerHTML))),typeof t=="string"?e.template[t]=n:n):t?typeof t!="string"?e.template(null,t):e.template[t]||e.template(null,r.test(t)?t:e(t)):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){i={}},afterManip:function(t,n,r){var i=n.nodeType===11?e.makeArray(n.childNodes):n.nodeType===1?[n]:[];r.call(t,n),y(i),f++}})}(jQuery),n("lib/jquery.tmpl-1.0.0pre.min",function(){}),n("lib/jquery.tmpl",["lib/jquery.tmpl-1.0.0pre.min"],function(){}),function(e,r,i,s){function o(e){throw e}function c(e){return function(){return e}}function h(t){function n(e,t,n){n&&t!==s.k.r(e)&&s.k.S(e,t),t!==s.k.r(e)&&s.a.va(e,"change")}var s="undefined"!=typeof t?t:{};s.b=function(e,t){for(var n=e.split("."),r=s,i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=t},s.B=function(e,t,n){e[t]=n},s.version="2.1.0",s.b("version",s.version),s.a=new function(){function t(e,t){if("input"!==s.a.o(e)||!e.type||"click"!=t.toLowerCase())return l;var n=e.type;return"checkbox"==n||"radio"==n}var n=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,c={},h={};c[/Firefox\/2/i.test(i.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],c.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");for(var d in c){var v=c[d];if(v.length)for(var g=0,y=v.length;g<y;g++)h[v[g]]=d}var b={propertychange:a},w=function(){for(var e=3,t=r.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0];);return 4<e?e:u}();return{Ca:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],v:function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n])},j:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},ab:function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r]))return e[r];return f},ba:function(e,t){var n=s.a.j(e,t);0<=n&&e.splice(n,1)},za:function(e){for(var e=e||[],t=[],n=0,r=e.length;n<r;n++)0>s.a.j(t,e[n])&&t.push(e[n]);return t},T:function(e,t){for(var e=e||[],n=[],r=0,i=e.length;r<i;r++)n.push(t(e[r]));return n},aa:function(e,t){for(var e=e||[],n=[],r=0,i=e.length;r<i;r++)t(e[r])&&n.push(e[r]);return n},N:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;n<r;n++)e.push(t[n]);return e},extend:function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},ga:function(e){for(;e.firstChild;)s.removeNode(e.firstChild)},Ab:function(e){for(var e=s.a.L(e),t=r.createElement("div"),n=0,i=e.length;n<i;n++)s.F(e[n]),t.appendChild(e[n]);return t},X:function(e,t){s.a.ga(e);if(t)for(var n=0,r=t.length;n<r;n++)e.appendChild(t[n])},Na:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var r=n[0],i=r.parentNode,o=0,u=t.length;o<u;o++)i.insertBefore(t[o],r);o=0;for(u=n.length;o<u;o++)s.removeNode(n[o])}},Pa:function(e,t){0<=i.userAgent.indexOf("MSIE 6")?e.setAttribute("selected",t):e.selected=t},w:function(e){return(e||"").replace(n,"")},Ib:function(e,t){for(var n=[],r=(e||"").split(t),i=0,o=r.length;i<o;i++){var u=s.a.w(r[i]);""!==u&&n.push(u)}return n},Hb:function(e,t){return e=e||"",t.length>e.length?l:e.substring(0,t.length)===t},eb:function(e,t){for(var n="return ("+e+")",r=0;r<t;r++)n="with(sc["+r+"]) { "+n+" } ";return new Function("sc",n)},kb:function(e,t){if(t.compareDocumentPosition)return 16==(t.compareDocumentPosition(e)&16);for(;e!=f;){if(e==t)return a;e=e.parentNode}return l},fa:function(e){return s.a.kb(e,e.ownerDocument)},o:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},n:function(e,n,r){var i=w&&b[n];if(!i&&"undefined"!=typeof jQuery){if(t(e,n))var s=r,r=function(e,t){var n=this.checked;t&&(this.checked=t.fb!==a),s.call(this,e),this.checked=n};jQuery(e).bind(n,r)}else!i&&"function"==typeof e.addEventListener?e.addEventListener(n,r,l):"undefined"!=typeof e.attachEvent?e.attachEvent("on"+n,function(t){r.call(e,t)}):o(Error("Browser doesn't support addEventListener or attachEvent"))},va:function(n,i){(!n||!n.nodeType)&&o(Error("element must be a DOM node when calling triggerEvent"));if("undefined"!=typeof jQuery){var s=[];t(n,i)&&s.push({fb:n.checked}),jQuery(n).trigger(i,s)}else"function"==typeof r.createEvent?"function"==typeof n.dispatchEvent?(s=r.createEvent(h[i]||"HTMLEvents"),s.initEvent(i,a,a,e,0,0,0,0,0,l,l,l,l,0,n),n.dispatchEvent(s)):o(Error("The supplied element doesn't support dispatchEvent")):"undefined"!=typeof n.fireEvent?(t(n,i)&&(n.checked=n.checked!==a),n.fireEvent("on"+i)):o(Error("Browser doesn't support triggering events"))},d:function(e){return s.la(e)?e():e},Ua:function(e,t,n){var r=(e.className||"").split(/\s+/),i=0<=s.a.j(r,t);if(n&&!i)e.className+=(r[0]?" ":"")+t;else if(i&&!n){n="";for(i=0;i<r.length;i++)r[i]!=t&&(n+=r[i]+" ");e.className=s.a.w(n)}},Qa:function(e,t){var n=s.a.d(t);if(n===f||n===u)n="";"innerText"in e?e.innerText=n:e.textContent=n,9<=w&&(e.style.display=e.style.display)},lb:function(e){if(9<=w){var t=e.style.width;e.style.width=0,e.style.width=t}},Eb:function(e,t){for(var e=s.a.d(e),t=s.a.d(t),n=[],r=e;r<=t;r++)n.push(r);return n},L:function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t},tb:6===w,ub:7===w,ja:w,Da:function(e,t){for(var n=s.a.L(e.getElementsByTagName("input")).concat(s.a.L(e.getElementsByTagName("textarea"))),r="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[],o=n.length-1;0<=o;o--)r(n[o])&&i.push(n[o]);return i},Bb:function(t){return"string"==typeof t&&(t=s.a.w(t))?e.JSON&&e.JSON.parse?e.JSON.parse(t):(new Function("return "+t))():f},sa:function(e,t,n){return("undefined"==typeof JSON||"undefined"==typeof JSON.stringify)&&o(Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js")),JSON.stringify(s.a.d(e),t,n)},Cb:function(e,t,n){var n=n||{},i=n.params||{},o=n.includeFields||this.Ca,u=e;if("object"==typeof e&&"form"===s.a.o(e))for(var u=e.action,a=o.length-1;0<=a;a--)for(var f=s.a.Da(e,o[a]),l=f.length-1;0<=l;l--)i[f[l].name]=f[l].value;var t=s.a.d(t),c=r.createElement("form");c.style.display="none",c.action=u,c.method="post";for(var h in t)e=r.createElement("input"),e.name=h,e.value=s.a.sa(s.a.d(t[h])),c.appendChild(e);for(h in i)e=r.createElement("input"),e.name=h,e.value=i[h],c.appendChild(e);r.body.appendChild(c),n.submitter?n.submitter(c):c.submit(),setTimeout(function(){c.parentNode.removeChild(c)},0)}}},s.b("utils",s.a),s.b("utils.arrayForEach",s.a.v),s.b("utils.arrayFirst",s.a.ab),s.b("utils.arrayFilter",s.a.aa),s.b("utils.arrayGetDistinctValues",s.a.za),s.b("utils.arrayIndexOf",s.a.j),s.b("utils.arrayMap",s.a.T),s.b("utils.arrayPushAll",s.a.N),s.b("utils.arrayRemoveItem",s.a.ba),s.b("utils.extend",s.a.extend),s.b("utils.fieldsIncludedWithJsonPost",s.a.Ca),s.b("utils.getFormFields",s.a.Da),s.b("utils.postJson",s.a.Cb),s.b("utils.parseJson",s.a.Bb),s.b("utils.registerEventHandler",s.a.n),s.b("utils.stringifyJson",s.a.sa),s.b("utils.range",s.a.Eb),s.b("utils.toggleDomNodeCssClass",s.a.Ua),s.b("utils.triggerEvent",s.a.va),s.b("utils.unwrapObservable",s.a.d),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments),e=n.shift();return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),s.a.f=new function(){var e=0,t="__ko__"+(new Date).getTime(),n={};return{get:function(e,t){var n=s.a.f.getAll(e,l);return n===u?u:n[t]},set:function(e,t,n){n===u&&s.a.f.getAll(e,l)===u||(s.a.f.getAll(e,a)[t]=n)},getAll:function(r,i){var s=r[t];if(!s||"null"===s){if(!i)return;s=r[t]="ko"+e++,n[s]={}}return n[s]},clear:function(e){var r=e[t];r&&(delete n[r],e[t]=f)}}},s.b("utils.domData",s.a.f),s.b("utils.domData.clear",s.a.f.clear),s.a.G=new function(){function e(e,t){var r=s.a.f.get(e,n);return r===u&&t&&(r=[],s.a.f.set(e,n,r)),r}function t(n){var r=e(n,l);if(r)for(var r=r.slice(0),o=0;o<r.length;o++)r[o](n);s.a.f.clear(n),"function"==typeof jQuery&&"function"==typeof jQuery.cleanData&&jQuery.cleanData([n]);if(i[n.nodeType])for(r=n.firstChild;n=r;)r=n.nextSibling,8===n.nodeType&&t(n)}var n="__ko_domNodeDisposal__"+(new Date).getTime(),r={1:a,8:a,9:a},i={1:a,9:a};return{wa:function(t,n){"function"!=typeof n&&o(Error("Callback must be a function")),e(t,a).push(n)},Ma:function(t,r){var i=e(t,l);i&&(s.a.ba(i,r),0==i.length&&s.a.f.set(t,n,u))},F:function(e){if(r[e.nodeType]&&(t(e),i[e.nodeType])){var n=[];s.a.N(n,e.getElementsByTagName("*"));for(var e=0,o=n.length;e<o;e++)t(n[e])}},removeNode:function(e){s.F(e),e.parentNode&&e.parentNode.removeChild(e)}}},s.F=s.a.G.F,s.removeNode=s.a.G.removeNode,s.b("cleanNode",s.F),s.b("removeNode",s.removeNode),s.b("utils.domNodeDisposal",s.a.G),s.b("utils.domNodeDisposal.addDisposeCallback",s.a.G.wa),s.b("utils.domNodeDisposal.removeDisposeCallback",s.a.G.Ma),function(){s.a.pa=function(t){var n;if("undefined"!=typeof jQuery){if((n=jQuery.clean([t]))&&n[0]){for(t=n[0];t.parentNode&&11!==t.parentNode.nodeType;)t=t.parentNode;t.parentNode&&t.parentNode.removeChild(t)}}else{var i=s.a.w(t).toLowerCase();n=r.createElement("div"),i=i.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!i.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!i.indexOf("<td")||!i.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],t="ignored<div>"+i[1]+t+i[2]+"</div>";for("function"==typeof e.innerShiv?n.appendChild(e.innerShiv(t)):n.innerHTML=t;i[0]--;)n=n.lastChild;n=s.a.L(n.lastChild.childNodes)}return n},s.a.Y=function(e,t){s.a.ga(e);if(t!==f&&t!==u)if("string"!=typeof t&&(t=t.toString()),"undefined"!=typeof jQuery)jQuery(e).html(t);else for(var n=s.a.pa(t),r=0;r<n.length;r++)e.appendChild(n[r])}}(),s.b("utils.parseHtmlFragment",s.a.pa),s.b("utils.setHtml",s.a.Y),s.s=function(){function e(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}function t(e,n){if(e)if(8==e.nodeType){var r=s.s.Ja(e.nodeValue);r!=f&&n.push({jb:e,yb:r})}else if(1==e.nodeType)for(var r=0,i=e.childNodes,o=i.length;r<o;r++)t(i[r],n)}var n={};return{na:function(t){"function"!=typeof t&&o(Error("You can only pass a function to ko.memoization.memoize()"));var r=e()+e();return n[r]=t,"<!--[ko_memo:"+r+"]-->"},Va:function(e,t){var r=n[e];r===u&&o(Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized."));try{return r.apply(f,t||[]),a}finally{delete n[e]}},Wa:function(e,n){var r=[];t(e,r);for(var i=0,o=r.length;i<o;i++){var u=r[i].jb,a=[u];n&&s.a.N(a,n),s.s.Va(r[i].yb,a),u.nodeValue="",u.parentNode&&u.parentNode.removeChild(u)}},Ja:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:f}}}(),s.b("memoization",s.s),s.b("memoization.memoize",s.s.na),s.b("memoization.unmemoize",s.s.Va),s.b("memoization.parseMemoText",s.s.Ja),s.b("memoization.unmemoizeDomNodeAndDescendants",s.s.Wa),s.Ba={throttle:function(e,t){e.throttleEvaluation=t;var n=f;return s.h({read:e,write:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}})},notify:function(e,t){return e.equalityComparer="always"==t?c(l):s.m.fn.equalityComparer,e}},s.b("extenders",s.Ba),s.Sa=function(e,t,n){this.target=e,this.ca=t,this.ib=n,s.B(this,"dispose",this.A)},s.Sa.prototype.A=function(){this.sb=a,this.ib()},s.R=function(){this.u={},s.a.extend(this,s.R.fn),s.B(this,"subscribe",this.ta),s.B(this,"extend",this.extend),s.B(this,"getSubscriptionsCount",this.ob)},s.R.fn={ta:function(e,t,n){var n=n||"change",e=t?e.bind(t):e,r=new s.Sa(this,e,function(){s.a.ba(this.u[n],r)}.bind(this));return this.u[n]||(this.u[n]=[]),this.u[n].push(r),r},notifySubscribers:function(e,t){t=t||"change",this.u[t]&&s.a.v(this.u[t].slice(0),function(t){t&&t.sb!==a&&t.ca(e)})},ob:function(){var e=0,t;for(t in this.u)this.u.hasOwnProperty(t)&&(e+=this.u[t].length);return e},extend:function(e){var t=this;if(e)for(var n in e){var r=s.Ba[n];"function"==typeof r&&(t=r(t,e[n]))}return t}},s.Ga=function(e){return"function"==typeof e.ta&&"function"==typeof e.notifySubscribers},s.b("subscribable",s.R),s.b("isSubscribable",s.Ga),s.U=function(){var e=[];return{bb:function(t){e.push({ca:t,Aa:[]})},end:function(){e.pop()},La:function(t){s.Ga(t)||o(Error("Only subscribable things can act as dependencies"));if(0<e.length){var n=e[e.length-1];0<=s.a.j(n.Aa,t)||(n.Aa.push(t),n.ca(t))}}}}();var h={"undefined":a,"boolean":a,number:a,string:a};s.m=function(e){function t(){if(0<arguments.length){if(!t.equalityComparer||!t.equalityComparer(n,arguments[0]))t.I(),n=arguments[0],t.H();return this}return s.U.La(t),n}var n=e;return s.R.call(t),t.H=function(){t.notifySubscribers(n)},t.I=function(){t.notifySubscribers(n,"beforeChange")},s.a.extend(t,s.m.fn),s.B(t,"valueHasMutated",t.H),s.B(t,"valueWillMutate",t.I),t},s.m.fn={equalityComparer:function(e,t){return e===f||typeof e in h?e===t:l}};var d=s.m.Db="__ko_proto__";s.m.fn[d]=s.m,s.ia=function(e,t){return e===f||e===u||e[d]===u?l:e[d]===t?a:s.ia(e[d],t)},s.la=function(e){return s.ia(e,s.m)},s.Ha=function(e){return"function"==typeof e&&e[d]===s.m||"function"==typeof e&&e[d]===s.h&&e.pb?a:l},s.b("observable",s.m),s.b("isObservable",s.la),s.b("isWriteableObservable",s.Ha),s.Q=function(e){0==arguments.length&&(e=[]),e!==f&&e!==u&&!("length"in e)&&o(Error("The argument passed when initializing an observable array must be an array, or null, or undefined."));var t=s.m(e);return s.a.extend(t,s.Q.fn),t},s.Q.fn={remove:function(e){for(var t=this(),n=[],r="function"==typeof e?e:function(t){return t===e},i=0;i<t.length;i++){var s=t[i];r(s)&&(0===n.length&&this.I(),n.push(s),t.splice(i,1),i--)}return n.length&&this.H(),n},removeAll:function(e){if(e===u){var t=this(),n=t.slice(0);return this.I(),t.splice(0,t.length),this.H(),n}return e?this.remove(function(t){return 0<=s.a.j(e,t)}):[]},destroy:function(e){var t=this(),n="function"==typeof e?e:function(t){return t===e};this.I();for(var r=t.length-1;0<=r;r--)n(t[r])&&(t[r]._destroy=a);this.H()},destroyAll:function(e){return e===u?this.destroy(c(a)):e?this.destroy(function(t){return 0<=s.a.j(e,t)}):[]},indexOf:function(e){var t=this();return s.a.j(t,e)},replace:function(e,t){var n=this.indexOf(e);0<=n&&(this.I(),this()[n]=t,this.H())}},s.a.v("pop push reverse shift sort splice unshift".split(" "),function(e){s.Q.fn[e]=function(){var t=this();return this.I(),t=t[e].apply(t,arguments),this.H(),t}}),s.a.v(["slice"],function(e){s.Q.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),s.b("observableArray",s.Q),s.h=function(e,t,n){function r(){s.a.v(S,function(e){e.A()}),S=[]}function i(){var e=d.throttleEvaluation;e&&0<=e?(clearTimeout(k),k=setTimeout(h,e)):h()}function h(){if(!b)if(y&&N())x();else{b=a;try{var e=s.a.T(S,function(e){return e.target});s.U.bb(function(t){var n;0<=(n=s.a.j(e,t))?e[n]=u:S.push(t.ta(i))});for(var n=w.call(t),r=e.length-1;0<=r;r--)e[r]&&S.splice(r,1)[0].A();y=a,d.notifySubscribers(g,"beforeChange"),g=n}finally{s.U.end()}d.notifySubscribers(g),b=l}}function d(){if(!(0<arguments.length))return y||h(),s.U.La(d),g;v.apply(d,arguments)}function v(){"function"==typeof E?E.apply(t,arguments):o(Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters."))}var g,y=l,b=l,w=e;w&&"object"==typeof w?(n=w,w=n.read):(n=n||{},w||(w=n.read)),"function"!=typeof w&&o(Error("Pass a function that returns the value of the ko.computed"));var E=n.write;t||(t=n.owner);var S=[],x=r,T="object"==typeof n.disposeWhenNodeIsRemoved?n.disposeWhenNodeIsRemoved:f,N=n.disposeWhen||c(l);if(T){x=function(){s.a.G.Ma(T,arguments.callee),r()},s.a.G.wa(T,x);var C=N,N=function(){return!s.a.fa(T)||C()}}var k=f;return d.nb=function(){return S.length},d.pb="function"==typeof n.write,d.A=function(){x()},s.R.call(d),s.a.extend(d,s.h.fn),n.deferEvaluation!==a&&h(),s.B(d,"dispose",d.A),s.B(d,"getDependenciesCount",d.nb),d},s.rb=function(e){return s.ia(e,s.h)},t=s.m.Db,s.h[t]=s.m,s.h.fn={},s.h.fn[t]=s.h,s.b("dependentObservable",s.h),s.b("computed",s.h),s.b("isComputed",s.rb),function(){function e(r,i,s){s=s||new n,r=i(r);if("object"!=typeof r||r===f||r===u||r instanceof Date)return r;var o=r instanceof Array?[]:{};return s.save(r,o),t(r,function(t){var n=i(r[t]);switch(typeof n){case"boolean":case"number":case"string":case"function":o[t]=n;break;case"object":case"undefined":var a=s.get(n);o[t]=a!==u?a:e(n,i,s)}}),o}function t(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(n in e)t(n)}function n(){var e=[],t=[];this.save=function(n,r){var i=s.a.j(e,n);0<=i?t[i]=r:(e.push(n),t.push(r))},this.get=function(n){return n=s.a.j(e,n),0<=n?t[n]:u}}s.Ta=function(t){return 0==arguments.length&&o(Error("When calling ko.toJS, pass the object you want to convert.")),e(t,function(e){for(var t=0;s.la(e)&&10>t;t++)e=e();return e})},s.toJSON=function(e,t,n){return e=s.Ta(e),s.a.sa(e,t,n)}}(),s.b("toJS",s.Ta),s.b("toJSON",s.toJSON),function(){s.k={r:function(e){switch(s.a.o(e)){case"option":return e.__ko__hasDomDataOptionValue__===a?s.a.f.get(e,s.c.options.oa):e.getAttribute("value");case"select":return 0<=e.selectedIndex?s.k.r(e.options[e.selectedIndex]):u;default:return e.value}},S:function(e,t){switch(s.a.o(e)){case"option":switch(typeof t){case"string":s.a.f.set(e,s.c.options.oa,u),"__ko__hasDomDataOptionValue__"in e&&delete e.__ko__hasDomDataOptionValue__,e.value=t;break;default:s.a.f.set(e,s.c.options.oa,t),e.__ko__hasDomDataOptionValue__=a,e.value="number"==typeof t?t:""}break;case"select":for(var n=e.options.length-1;0<=n;n--)if(s.k.r(e.options[n])==t){e.selectedIndex=n;break}break;default:if(t===f||t===u)t="";e.value=t}}}}(),s.b("selectExtensions",s.k),s.b("selectExtensions.readValue",s.k.r),s.b("selectExtensions.writeValue",s.k.S),s.g=function(){function e(e,n){for(var r=f;e!=r;)r=e,e=e.replace(t,function(e,t){return n[t]});return e}var t=/\@ko_token_(\d+)\@/g,n=/^[\_$a-z][\_$a-z0-9]*(\[.*?\])*(\.[\_$a-z][\_$a-z0-9]*(\[.*?\])*)*$/i,r=["true","false"];return{D:[],W:function(t){var n=s.a.w(t);if(3>n.length)return[];"{"===n.charAt(0)&&(n=n.substring(1,n.length-1));for(var t=[],r=f,i,o=0;o<n.length;o++){var u=n.charAt(o);if(r===f)switch(u){case'"':case"'":case"/":r=o,i=u}else if(u==i&&"\\"!==n.charAt(o-1)){u=n.substring(r,o+1),t.push(u);var a="@ko_token_"+(t.length-1)+"@",n=n.substring(0,r)+a+n.substring(o+1),o=o-(u.length-a.length),r=f}}i=r=f;for(var l=0,c=f,o=0;o<n.length;o++){u=n.charAt(o);if(r===f)switch(u){case"{":r=o,c=u,i="}";break;case"(":r=o,c=u,i=")";break;case"[":r=o,c=u,i="]"}u===c?l++:u===i&&(l--,0===l&&(u=n.substring(r,o+1),t.push(u),a="@ko_token_"+(t.length-1)+"@",n=n.substring(0,r)+a+n.substring(o+1),o-=u.length-a.length,r=f))}i=[],n=n.split(","),r=0;for(o=n.length;r<o;r++)l=n[r],c=l.indexOf(":"),0<c&&c<l.length-1?(u=l.substring(c+1),i.push({key:e(l.substring(0,c),t),value:e(u,t)})):i.push({unknown:e(l,t)});return i},ka:function(e){for(var t="string"==typeof e?s.g.W(e):e,i=[],e=[],o,u=0;o=t[u];u++)if(0<i.length&&i.push(","),o.key){var a;e:{a=o.key;var l=s.a.w(a);switch(l.length&&l.charAt(0)){case"'":case'"':break e;default:a="'"+l+"'"}}o=o.value,i.push(a),i.push(":"),i.push(o),l=s.a.w(o);if(0<=s.a.j(r,s.a.w(l).toLowerCase())?0:l.match(n)!==f)0<e.length&&e.push(", "),e.push(a+" : function(__ko_value) { "+o+" = __ko_value; }")}else o.unknown&&i.push(o.unknown);return t=i.join(""),0<e.length&&(t=t+", '_ko_property_writers' : { "+e.join("")+" } "),t},wb:function(e,t){for(var n=0;n<e.length;n++)if(s.a.w(e[n].key)==t)return a;return l},$:function(e,t,n,r,i){!e||!s.Ha(e)?(e=t()._ko_property_writers)&&e[n]&&e[n](r):(!i||e()!==r)&&e(r)}}}(),s.b("jsonExpressionRewriting",s.g),s.b("jsonExpressionRewriting.bindingRewriteValidators",s.g.D),s.b("jsonExpressionRewriting.parseObjectLiteral",s.g.W),s.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",s.g.ka),function(){function e(e){return 8==e.nodeType&&(u?e.text:e.nodeValue).match(l)}function t(e){return 8==e.nodeType&&(u?e.text:e.nodeValue).match(c)}function n(n,r){for(var i=n,s=1,u=[];i=i.nextSibling;){if(t(i)&&(s--,0===s))return u;u.push(i),e(i)&&s++}return r||o(Error("Cannot find closing comment tag to match: "+n.nodeValue)),f}function i(e,t){var r=n(e,t);return r?0<r.length?r[r.length-1].nextSibling:e.nextSibling:f}var u="<!--test-->"===r.createComment("test").text,l=u?/^<\!--\s*ko\s+(.*\:.*)\s*--\>$/:/^\s*ko\s+(.*\:.*)\s*$/,c=u?/^<\!--\s*\/ko\s*--\>$/:/^\s*\/ko\s*$/,h={ul:a,ol:a};s.e={C:{},childNodes:function(t){return e(t)?n(t):t.childNodes},ha:function(t){if(e(t))for(var t=s.e.childNodes(t),n=0,r=t.length;n<r;n++)s.removeNode(t[n]);else s.a.ga(t)},X:function(t,n){if(e(t)){s.e.ha(t);for(var r=t.nextSibling,i=0,o=n.length;i<o;i++)r.parentNode.insertBefore(n[i],r)}else s.a.X(t,n)},Ka:function(t,n){e(t)?t.parentNode.insertBefore(n,t.nextSibling):t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)},Fa:function(t,n,r){e(t)?t.parentNode.insertBefore(n,r.nextSibling):r.nextSibling?t.insertBefore(n,r.nextSibling):t.appendChild(n)},firstChild:function(n){return e(n)?!n.nextSibling||t(n.nextSibling)?f:n.nextSibling:n.firstChild},nextSibling:function(n){return e(n)&&(n=i(n)),n.nextSibling&&t(n.nextSibling)?f:n.nextSibling},Xa:function(t){return(t=e(t))?t[1]:f},Ia:function(n){if(h[s.a.o(n)]){var r=n.firstChild;if(r)do if(1===r.nodeType){var o;o=r.firstChild;var u=f;if(o)do if(u)u.push(o);else if(e(o)){var l=i(o,a);l?o=l:u=[o]}else t(o)&&(u=[o]);while(o=o.nextSibling);if(o=u){u=r.nextSibling;for(l=0;l<o.length;l++)u?n.insertBefore(o[l],u):n.appendChild(o[l])}}while(r=r.nextSibling)}}}}(),s.b("virtualElements",s.e),s.b("virtualElements.allowedBindings",s.e.C),s.b("virtualElements.emptyNode",s.e.ha),s.b("virtualElements.insertAfter",s.e.Fa),s.b("virtualElements.prepend",s.e.Ka),s.b("virtualElements.setDomNodeChildren",s.e.X),function(){s.J=function(){this.cb={}},s.a.extend(s.J.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind")!=f;case 8:return s.e.Xa(e)!=f;default:return l}},getBindings:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t):f},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return s.e.Xa(e);default:return f}},parseBindingsString:function(e,t){try{var n=t.$data,n="object"==typeof n&&n!=f?[n,t]:[t],r=n.length,i=this.cb,u=r+"_"+e,a;if(!(a=i[u])){var l=" { "+s.g.ka(e)+" } ";a=i[u]=s.a.eb(l,r)}return a(n)}catch(c){o(Error("Unable to parse bindings.\nMessage: "+c+";\nBindings value: "+e))}}}),s.J.instance=new s.J}(),s.b("bindingProvider",s.J),function(){function t(e,t,r){for(var i=s.e.firstChild(t);t=i;)i=s.e.nextSibling(t),n(e,t,r)}function n(e,n,i){var o=a,u=1===n.nodeType;u&&s.e.Ia(n);if(u&&i||s.J.instance.nodeHasBindings(n))o=r(n,f,e,i).Gb;o&&t(e,n,!u)}function r(e,t,n,r){function i(e){return function(){return c[e]}}function a(){return c}var l=0,c,h;return s.h(function(){var f=n&&n instanceof s.z?n:new s.z(s.a.d(n)),p=f.$data;r&&s.Ra(e,f);if(c=("function"==typeof t?t():t)||s.J.instance.getBindings(e,f)){if(0===l){l=1;for(var d in c){var v=s.c[d];v&&8===e.nodeType&&!s.e.C[d]&&o(Error("The binding '"+d+"' cannot be used with virtual elements")),v&&"function"==typeof v.init&&(v=(0,v.init)(e,i(d),a,p,f))&&v.controlsDescendantBindings&&(h!==u&&o(Error("Multiple bindings ("+h+" and "+d+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.")),h=d)}l=2}if(2===l)for(d in c)(v=s.c[d])&&"function"==typeof v.update&&(0,v.update)(e,i(d),a,p,f)}},f,{disposeWhenNodeIsRemoved:e}),{Gb:h===u}}s.c={},s.z=function(e,t){t?(s.a.extend(this,t),this.$parentContext=t,this.$parent=t.$data,this.$parents=(t.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=e),this.$data=e},s.z.prototype.createChildContext=function(e){return new s.z(e,this)},s.z.prototype.extend=function(e){var t=s.a.extend(new s.z,this);return s.a.extend(t,e)},s.Ra=function(e,t){if(2!=arguments.length)return s.a.f.get(e,"__ko_bindingContext__");s.a.f.set(e,"__ko_bindingContext__",t)},s.ya=function(e,t,n){return 1===e.nodeType&&s.e.Ia(e),r(e,t,n,a)},s.Ya=function(e,n){(1===n.nodeType||8===n.nodeType)&&t(e,n,a)},s.xa=function(t,r){r&&1!==r.nodeType&&8!==r.nodeType&&o(Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node")),r=r||e.document.body,n(t,r,a)},s.ea=function(e){switch(e.nodeType){case 1:case 8:var t=s.Ra(e);if(t)return t;if(e.parentNode)return s.ea(e.parentNode)}},s.hb=function(e){return(e=s.ea(e))?e.$data:u},s.b("bindingHandlers",s.c),s.b("applyBindings",s.xa),s.b("applyBindingsToDescendants",s.Ya),s.b("applyBindingsToNode",s.ya),s.b("contextFor",s.ea),s.b("dataFor",s.hb)}(),s.a.v(["click"],function(e){s.c[e]={init:function(t,n,r,i){return s.c.event.init.call(this,t,function(){var t={};return t[e]=n(),t},r,i)}}}),s.c.event={init:function(e,t,n,r){var i=t()||{},o;for(o in i)(function(){var i=o;"string"==typeof i&&s.a.n(e,i,function(e){var o,u=t()[i];if(u){var f=n();try{var c=s.a.L(arguments);c.unshift(r),o=u.apply(r,c)}finally{o!==a&&(e.preventDefault?e.preventDefault():e.returnValue=l)}f[i+"Bubble"]===l&&(e.cancelBubble=a,e.stopPropagation&&e.stopPropagation())}})})()}},s.c.submit={init:function(e,t,n,r){"function"!=typeof t()&&o(Error("The value for a submit binding must be a function")),s.a.n(e,"submit",function(n){var i,s=t();try{i=s.call(r,e)}finally{i!==a&&(n.preventDefault?n.preventDefault():n.returnValue=l)}})}},s.c.visible={update:function(e,t){var n=s.a.d(t()),r="none"!=e.style.display;n&&!r?e.style.display="":!n&&r&&(e.style.display="none")}},s.c.enable={update:function(e,t){var n=s.a.d(t());n&&e.disabled?e.removeAttribute("disabled"):!n&&!e.disabled&&(e.disabled=a)}},s.c.disable={update:function(e,t){s.c.enable.update(e,function(){return!s.a.d(t())})}},s.c.value={init:function(e,t,n){function r(){var r=t(),i=s.k.r(e);s.g.$(r,n,"value",i,a)}var i=["change"],o=n().valueUpdate;o&&("string"==typeof o&&(o=[o]),s.a.N(i,o),i=s.a.za(i));if(s.a.ja&&"input"==e.tagName.toLowerCase()&&"text"==e.type&&"off"!=e.autocomplete&&(!e.form||"off"!=e.form.autocomplete)&&-1==s.a.j(i,"propertychange")){var u=l;s.a.n(e,"propertychange",function(){u=a}),s.a.n(e,"blur",function(){u&&(u=l,r())})}s.a.v(i,function(t){var n=r;s.a.Hb(t,"after")&&(n=function(){setTimeout(r,0)},t=t.substring(5)),s.a.n(e,t,n)})},update:function(e,t){var r="select"===s.a.o(e),i=s.a.d(t()),o=s.k.r(e),u=i!=o;0===i&&0!==o&&"0"!==o&&(u=a),u&&(o=function(){s.k.S(e,i)},o(),r&&setTimeout(o,0)),r&&0<e.length&&n(e,i,l)}},s.c.options={update:function(e,t,i){"select"!==s.a.o(e)&&o(Error("options binding applies only to SELECT elements"));for(var l=0==e.length,c=s.a.T(s.a.aa(e.childNodes,function(e){return e.tagName&&"option"===s.a.o(e)&&e.selected}),function(e){return s.k.r(e)||e.innerText||e.textContent}),h=e.scrollTop,d=s.a.d(t());0<e.length;)s.F(e.options[0]),e.remove(0);if(d){i=i(),"number"!=typeof d.length&&(d=[d]);if(i.optionsCaption){var v=r.createElement("option");s.a.Y(v,i.optionsCaption),s.k.S(v,u),e.appendChild(v)}for(var t=0,g=d.length;t<g;t++){var v=r.createElement("option"),y="string"==typeof i.optionsValue?d[t][i.optionsValue]:d[t],y=s.a.d(y);s.k.S(v,y);var b=i.optionsText,y="function"==typeof b?b(d[t]):"string"==typeof b?d[t][b]:y;if(y===f||y===u)y="";s.a.Qa(v,y),e.appendChild(v)}d=e.getElementsByTagName("option"),t=v=0;for(g=d.length;t<g;t++)0<=s.a.j(c,s.k.r(d[t]))&&(s.a.Pa(d[t],a),v++);e.scrollTop=h,l&&"value"in i&&n(e,s.a.d(i.value),a),s.a.lb(e)}}},s.c.options.oa="__ko.optionValueDomData__",s.c.selectedOptions={Ea:function(e){for(var t=[],e=e.childNodes,n=0,r=e.length;n<r;n++){var i=e[n],o=s.a.o(i);"option"==o&&i.selected?t.push(s.k.r(i)):"optgroup"==o&&(i=s.c.selectedOptions.Ea(i),Array.prototype.splice.apply(t,[t.length,0].concat(i)))}return t},init:function(e,t,n){s.a.n(e,"change",function(){var e=t(),r=s.c.selectedOptions.Ea(this);s.g.$(e,n,"value",r)})},update:function(e,t){"select"!=s.a.o(e)&&o(Error("values binding applies only to SELECT elements"));var n=s.a.d(t());if(n&&"number"==typeof n.length)for(var r=e.childNodes,i=0,u=r.length;i<u;i++){var a=r[i];"option"===s.a.o(a)&&s.a.Pa(a,0<=s.a.j(n,s.k.r(a)))}}},s.c.text={update:function(e,t){s.a.Qa(e,t())}},s.c.html={init:function(){return{controlsDescendantBindings:a}},update:function(e,t){var n=s.a.d(t());s.a.Y(e,n)}},s.c.css={update:function(e,t){var n=s.a.d(t()||{}),r;for(r in n)if("string"==typeof r){var i=s.a.d(n[r]);s.a.Ua(e,r,i)}}},s.c.style={update:function(e,t){var n=s.a.d(t()||{}),r;for(r in n)if("string"==typeof r){var i=s.a.d(n[r]);e.style[r]=i||""}}},s.c.uniqueName={init:function(e,t){t()&&(e.name="ko_unique_"+ ++s.c.uniqueName.gb,(s.a.tb||s.a.ub)&&e.mergeAttributes(r.createElement("<input name='"+e.name+"'/>"),l))}},s.c.uniqueName.gb=0,s.c.checked={init:function(e,t,n){s.a.n(e,"click",function(){var r;if("checkbox"==e.type)r=e.checked;else{if("radio"!=e.type||!e.checked)return;r=e.value}var i=t();"checkbox"==e.type&&s.a.d(i)instanceof Array?(r=s.a.j(s.a.d(i),e.value),e.checked&&0>r?i.push(e.value):!e.checked&&0<=r&&i.splice(r,1)):s.g.$(i,n,"checked",r,a)}),"radio"==e.type&&!e.name&&s.c.uniqueName.init(e,c(a))},update:function(e,t){var n=s.a.d(t());"checkbox"==e.type?e.checked=n instanceof Array?0<=s.a.j(n,e.value):n:"radio"==e.type&&(e.checked=e.value==n)}};var v={"class":"className","for":"htmlFor"};s.c.attr={update:function(e,t){var n=s.a.d(t())||{},r;for(r in n)if("string"==typeof r){var i=s.a.d(n[r]),o=i===l||i===f||i===u;o&&e.removeAttribute(r),8>=s.a.ja&&r in v?(r=v[r],o?e.removeAttribute(r):e[r]=i):o||e.setAttribute(r,i.toString())}}},s.c.hasfocus={init:function(e,t,n){function r(e){var r=t();s.g.$(r,n,"hasfocus",e,a)}s.a.n(e,"focus",function(){r(a)}),s.a.n(e,"focusin",function(){r(a)}),s.a.n(e,"blur",function(){r(l)}),s.a.n(e,"focusout",function(){r(l)})},update:function(e,t){var n=s.a.d(t());n?e.focus():e.blur(),s.a.va(e,n?"focusin":"focusout")}},s.c["with"]={p:function(e){return function(){var t=e();return{"if":t,data:t,templateEngine:s.q.K}}},init:function(e,t){return s.c.template.init(e,s.c["with"].p(t))},update:function(e,t,n,r,i){return s.c.template.update(e,s.c["with"].p(t),n,r,i)}},s.g.D["with"]=l,s.e.C["with"]=a,s.c["if"]={p:function(e){return function(){return{"if":e(),templateEngine:s.q.K}}},init:function(e,t){return s.c.template.init(e,s.c["if"].p(t))},update:function(e,t,n,r,i){return s.c.template.update(e,s.c["if"].p(t),n,r,i)}},s.g.D["if"]=l,s.e.C["if"]=a,s.c.ifnot={p:function(e){return function(){return{ifnot:e(),templateEngine:s.q.K}}},init:function(e,t){return s.c.template.init(e,s.c.ifnot.p(t))},update:function(e,t,n,r,i){return s.c.template.update(e,s.c.ifnot.p(t),n,r,i)}},s.g.D.ifnot=l,s.e.C.ifnot=a,s.c.foreach={p:function(e){return function(){var t=s.a.d(e());return!t||"number"==typeof t.length?{foreach:t,templateEngine:s.q.K}:{foreach:t.data,includeDestroyed:t.includeDestroyed,afterAdd:t.afterAdd,beforeRemove:t.beforeRemove,afterRender:t.afterRender,templateEngine:s.q.K}}},init:function(e,t){return s.c.template.init(e,s.c.foreach.p(t))},update:function(e,t,n,r,i){return s.c.template.update(e,s.c.foreach.p(t),n,r,i)}},s.g.D.foreach=l,s.e.C.foreach=a,s.t=function(){},s.t.prototype.renderTemplateSource=function(){o(Error("Override renderTemplateSource"))},s.t.prototype.createJavaScriptEvaluatorBlock=function(){o(Error("Override createJavaScriptEvaluatorBlock"))},s.t.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){var t=t||r,n=t.getElementById(e);return n||o(Error("Cannot find template with ID "+e)),new s.l.i(n)}if(1==e.nodeType||8==e.nodeType)return new s.l.M(e);o(Error("Unknown template type: "+e))},s.t.prototype.renderTemplate=function(e,t,n,r){return this.renderTemplateSource(this.makeTemplateSource(e,r),t,n)},s.t.prototype.isTemplateRewritten=function(e,t){return this.allowTemplateRewriting===l||(!t||t==r)&&this.V&&this.V[e]?a:this.makeTemplateSource(e,t).data("isRewritten")},s.t.prototype.rewriteTemplate=function(e,t,n){var i=this.makeTemplateSource(e,n),t=t(i.text());i.text(t),i.data("isRewritten",a),(!n||n==r)&&"string"==typeof e&&(this.V=this.V||{},this.V[e]=a)},s.b("templateEngine",s.t),s.Z=function(){function e(e,t,n){for(var e=s.g.W(e),r=s.g.D,i=0;i<e.length;i++){var u=e[i].key;if(r.hasOwnProperty(u)){var a=r[u];"function"==typeof a?(u=a(e[i].value))&&o(Error(u)):a||o(Error("This template engine does not support the '"+u+"' binding within its templates"))}}return e="ko.templateRewriting.applyMemoizedBindingsToNextSibling(function() {             return (function() { return { "+s.g.ka(e)+" } })()         })",n.createJavaScriptEvaluatorBlock(e)+t}var t=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi,n=/<\!--\s*ko\b\s*([\s\S]*?)\s*--\>/g;return{mb:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return s.Z.zb(e,t)},n)},zb:function(r,i){return r.replace(t,function(t,n,r,s,o,u,a){return e(a,n,i)}).replace(n,function(t,n){return e(n,"<!-- ko -->",i)})},Za:function(e){return s.s.na(function(t,n){t.nextSibling&&s.ya(t.nextSibling,e,n)})}}}(),s.b("templateRewriting",s.Z),s.b("templateRewriting.applyMemoizedBindingsToNextSibling",s.Z.Za),function(){s.l={},s.l.i=function(e){this.i=e},s.l.i.prototype.text=function(){var e=s.a.o(this.i),e="script"===e?"text":"textarea"===e?"value":"innerHTML";if(0==arguments.length)return this.i[e];var t=arguments[0];"innerHTML"===e?s.a.Y(this.i,t):this.i[e]=t},s.l.i.prototype.data=function(e){if(1===arguments.length)return s.a.f.get(this.i,"templateSourceData_"+e);s.a.f.set(this.i,"templateSourceData_"+e,arguments[1])},s.l.M=function(e){this.i=e},s.l.M.prototype=new s.l.i,s.l.M.prototype.text=function(){if(0==arguments.length){var e=s.a.f.get(this.i,"__ko_anon_template__")||{};return e.ua===u&&e.da&&(e.ua=e.da.innerHTML),e.ua}s.a.f.set(this.i,"__ko_anon_template__",{ua:arguments[0]})},s.l.i.prototype.nodes=function(){if(0==arguments.length)return(s.a.f.get(this.i,"__ko_anon_template__")||{}).da;s.a.f.set(this.i,"__ko_anon_template__",{da:arguments[0]})},s.b("templateSources",s.l),s.b("templateSources.domElement",s.l.i),s.b("templateSources.anonymousTemplate",s.l.M)}(),function(){function e(e,t,n){for(var r,t=s.e.nextSibling(t);e&&(r=e)!==t;)e=s.e.nextSibling(r),(1===r.nodeType||8===r.nodeType)&&n(r)}function t(t,n){if(t.length){var r=t[0],i=t[t.length-1];e(r,i,function(e){s.xa(n,e)}),e(r,i,function(e){s.s.Wa(e,[n])})}}function n(e){return e.nodeType?e:0<e.length?e[0]:f}function r(e,r,u,f,c){var c=c||{},h=e&&n(e),h=h&&h.ownerDocument,d=c.templateEngine||i;s.Z.mb(u,d,h),u=d.renderTemplate(u,f,c,h),("number"!=typeof u.length||0<u.length&&"number"!=typeof u[0].nodeType)&&o(Error("Template engine must return an array of DOM nodes")),h=l;switch(r){case"replaceChildren":s.e.X(e,u),h=a;break;case"replaceNode":s.a.Na(e,u),h=a;break;case"ignoreTargetNode":break;default:o(Error("Unknown renderMode: "+r))}return h&&(t(u,f),c.afterRender&&c.afterRender(u,f.$data)),u}var i;s.ra=function(e){e!=u&&!(e instanceof s.t)&&o(Error("templateEngine must inherit from ko.templateEngine")),i=e},s.qa=function(e,t,a,l,c){a=a||{},(a.templateEngine||i)==u&&o(Error("Set a template engine before calling renderTemplate")),c=c||"replaceChildren";if(l){var h=n(l);return s.h(function(){var i=t&&t instanceof s.z?t:new s.z(s.a.d(t)),o="function"==typeof e?e(i.$data):e,i=r(l,c,o,i,a);"replaceNode"==c&&(l=i,h=n(l))},f,{disposeWhen:function(){return!h||!s.a.fa(h)},disposeWhenNodeIsRemoved:h&&"replaceNode"==c?h.parentNode:h})}return s.s.na(function(n){s.qa(e,t,a,n,"replaceNode")})},s.Fb=function(e,n,i,o,a){function l(e,n){t(n,h),i.afterRender&&i.afterRender(n,e)}function c(t,n){var o="function"==typeof e?e(t):e;return h=a.createChildContext(s.a.d(t)),h.$index=n,r(f,"ignoreTargetNode",o,h,i)}var h;return s.h(function(){var e=s.a.d(n)||[];"undefined"==typeof e.length&&(e=[e]),e=s.a.aa(e,function(e){return i.includeDestroyed||e===u||e===f||!s.a.d(e._destroy)}),s.a.Oa(o,e,c,i,l)},f,{disposeWhenNodeIsRemoved:o})},s.c.template={init:function(e,t){var n=s.a.d(t());return"string"!=typeof n&&!n.name&&(1==e.nodeType||8==e.nodeType)&&(n=1==e.nodeType?e.childNodes:s.e.childNodes(e),n=s.a.Ab(n),(new s.l.M(e)).nodes(n)),{controlsDescendantBindings:a}},update:function(e,t,n,r,i){t=s.a.d(t()),r=a,"string"==typeof t?n=t:(n=t.name,"if"in t&&(r=r&&s.a.d(t["if"])),"ifnot"in t&&(r=r&&!s.a.d(t.ifnot)));var o=f;"object"==typeof t&&"foreach"in t?o=s.Fb(n||e,r&&t.foreach||[],t,e,i):r?(i="object"==typeof t&&"data"in t?i.createChildContext(s.a.d(t.data)):i,o=s.qa(n||e,i,t,e)):s.e.ha(e),i=o,(t=s.a.f.get(e,"__ko__templateSubscriptionDomDataKey__"))&&"function"==typeof t.A&&t.A(),s.a.f.set(e,"__ko__templateSubscriptionDomDataKey__",i)}},s.g.D.template=function(e){return e=s.g.W(e),1==e.length&&e[0].unknown||s.g.wb(e,"name")?f:"This template engine does not support anonymous templates nested within its templates"},s.e.C.template=a}(),s.b("setTemplateEngine",s.ra),s.b("renderTemplate",s.qa),function(){s.a.O=function(e,t,n){if(n===u)return s.a.O(e,t,1)||s.a.O(e,t,10)||s.a.O(e,t,Number.MAX_VALUE);for(var e=e||[],t=t||[],r=e,i=t,o=[],a=0;a<=i.length;a++)o[a]=[];for(var a=0,l=Math.min(r.length,n);a<=l;a++)o[0][a]=a;a=1;for(l=Math.min(i.length,n);a<=l;a++)o[a][0]=a;for(var l=r.length,c,h=i.length,a=1;a<=l;a++){c=Math.max(1,a-n);for(var p=Math.min(h,a+n);c<=p;c++)o[c][a]=r[a-1]===i[c-1]?o[c-1][a-1]:Math.min(o[c-1][a]===u?Number.MAX_VALUE:o[c-1][a]+1,o[c][a-1]===u?Number.MAX_VALUE:o[c][a-1]+1)}n=e.length,r=t.length,i=[],a=o[r][n];if(a===u)o=f;else{for(;0<n||0<r;){l=o[r][n],h=0<r?o[r-1][n]:a+1,p=0<n?o[r][n-1]:a+1,c=0<r&&0<n?o[r-1][n-1]:a+1;if(h===u||h<l-1)h=a+1;if(p===u||p<l-1)p=a+1;c<l-1&&(c=a+1),h<=p&&h<c?(i.push({status:"added",value:t[r-1]}),r--):(p<h&&p<c?i.push({status:"deleted",value:e[n-1]}):(i.push({status:"retained",value:e[n-1]}),r--),n--)}o=i.reverse()}return o}}(),s.b("utils.compareArrays",s.a.O),function(){function e(e){if(2<e.length){for(var t=e[0],n=e[e.length-1],r=[t];t!==n;){t=t.nextSibling;if(!t)return;r.push(t)}Array.prototype.splice.apply(e,[0,e.length].concat(r))}}function t(t,n,r,i,o){var u=[],t=s.h(function(){var t=n(r,o)||[];0<u.length&&(e(u),s.a.Na(u,t),i&&i(r,t)),u.splice(0,u.length),s.a.N(u,t)},f,{disposeWhenNodeIsRemoved:t,disposeWhen:function(){return 0==u.length||!s.a.fa(u[0])}});return{xb:u,h:t}}s.a.Oa=function(n,r,i,o,c){for(var r=r||[],o=o||{},h=s.a.f.get(n,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===u,d=s.a.f.get(n,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],v=s.a.T(d,function(e){return e.$a}),m=s.a.O(v,r),r=[],g=0,y=[],w=0,v=[],E=f,S=0,x=m.length;S<x;S++)switch(m[S].status){case"retained":var T=d[g];T.qb(w),w=r.push(T),0<T.P.length&&(E=T.P[T.P.length-1]),g++;break;case"deleted":d[g].h.A(),e(d[g].P),s.a.v(d[g].P,function(e){y.push({element:e,index:S,value:m[S].value}),E=e}),g++;break;case"added":for(var T=m[S].value,N=s.m(w),w=t(n,i,T,c,N),C=w.xb,w=r.push({$a:m[S].value,P:C,h:w.h,qb:N}),k=0,L=C.length;k<L;k++){var A=C[k];v.push({element:A,index:S,value:m[S].value}),E==f?s.e.Ka(n,A):s.e.Fa(n,A,E),E=A}c&&c(T,C,N)}s.a.v(y,function(e){s.F(e.element)}),i=l;if(!h){if(o.afterAdd)for(S=0;S<v.length;S++)o.afterAdd(v[S].element,v[S].index,v[S].value);if(o.beforeRemove){for(S=0;S<y.length;S++)o.beforeRemove(y[S].element,y[S].index,y[S].value);i=a}}if(!i&&y.length)for(S=0;S<y.length;S++)o=y[S].element,o.parentNode&&o.parentNode.removeChild(o);s.a.f.set(n,"setDomNodeChildrenFromArrayMapping_lastMappingResult",r)}}(),s.b("utils.setDomNodeChildrenFromArrayMapping",s.a.Oa),s.q=function(){this.allowTemplateRewriting=l},s.q.prototype=new s.t,s.q.prototype.renderTemplateSource=function(e){var t=9>s.a.ja||!e.nodes?f:e.nodes();return t?s.a.L(t.cloneNode(a).childNodes):(e=e.text(),s.a.pa(e))},s.q.K=new s.q,s.ra(s.q.K),s.b("nativeTemplateEngine",s.q),function(){s.ma=function(){var e=this.vb=function(){if("undefined"==typeof jQuery||!jQuery.tmpl)return 0;try{if(0<=jQuery.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(t,n,i){i=i||{},2>e&&o(Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later."));var s=t.data("precompiled");return s||(s=t.text()||"",s=jQuery.template(f,"{{ko_with $item.koBindingContext}}"+s+"{{/ko_with}}"),t.data("precompiled",s)),t=[n.$data],n=jQuery.extend({koBindingContext:n},i.templateOptions),n=jQuery.tmpl(s,t,n),n.appendTo(r.createElement("div")),jQuery.fragments={},n},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){r.write("<script type='text/html' id='"+e+"'>"+t+"</script>")},0<e&&(jQuery.tmpl.tag.ko_code={open:"__.push($1 || '');"},jQuery.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},s.ma.prototype=new s.t;var e=new s.ma;0<e.vb&&s.ra(e),s.b("jqueryTmplTemplateEngine",s.ma)}()}var u=void 0,a=!0,f=null,l=!1;"function"==typeof t&&"object"==typeof exports&&"object"==typeof module?h(module.exports||exports):"function"==typeof n&&n.amd?n("lib/knockout-2.1.0",["exports"],h):h(e.ko={}),a}(window,document,navigator),n("lib/knockout",["lib/knockout-2.1.0"],function(e){return window.ko=window.ko||e,window.ko}),function(){var e=Math,t=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",n="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,r="ontouchstart"in window,i=t+"Transform"in document.documentElement.style,s=/android/gi.test(navigator.appVersion),o=/iphone|ipad/gi.test(navigator.appVersion),u=/playbook/gi.test(navigator.appVersion),a=o||u,f=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1)}}(),l=function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),c="onorientationchange"in window?"orientationchange":"resize",h=r?"touchstart":"mousedown",p=r?"touchmove":"mousemove",d=r?"touchend":"mouseup",v=r?"touchcancel":"mouseup",m=t=="Moz"?"DOMMouseScroll":"mousewheel",g="translate"+(n?"3d(":"("),y=n?",0)":")",b=function(e,u){var f=this,l=document,p;f.wrapper=typeof e=="object"?e:l.getElementById(e),f.wrapper.style.overflow="hidden",f.scroller=f.wrapper.children[0],f.options={hScroll:!0,vScroll:!0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,roundPosition:!1,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:s,hideScrollbar:o,fadeScrollbar:o&&n,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(p in u)f.options[p]=u[p];f.options.useTransform=i?f.options.useTransform:!1,f.options.hScrollbar=f.options.hScroll&&f.options.hScrollbar,f.options.vScrollbar=f.options.vScroll&&f.options.vScrollbar,f.options.zoom=f.options.useTransform&&f.options.zoom,f.options.useTransition=a&&f.options.useTransition,f.scroller.style[t+"TransitionProperty"]=f.options.useTransform?"-"+t.toLowerCase()+"-transform":"top left",f.scroller.style[t+"TransitionDuration"]="0",f.scroller.style[t+"TransformOrigin"]="0 0",f.options.useTransition&&(f.scroller.style[t+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"),f.options.useTransform?f.scroller.style[t+"Transform"]=g+"0,0"+y:f.scroller.style.cssText+=";position:absolute;top:0;left:0",f.options.useTransition&&(f.options.fixedScrollbar=!0),f.refresh(),f._bind(c,window),f._bind(h),r||(f._bind("mouseout",f.wrapper),f._bind(m)),f.options.checkDOMChanges&&(f.checkDOMTime=setInterval(function(){f._checkDOMChanges()},500))};b.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var t=this;switch(e.type){case h:if(!r&&e.button!==0)return;t._start(e);break;case p:t._move(e);break;case d:case v:t._end(e);break;case c:t._resize();break;case m:t._wheel(e);break;case"mouseout":t._mouseout(e);break;case"webkitTransitionEnd":t._transitionEnd(e)}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)return;this.refresh()},_scrollbar:function(n){var r=this,s=document,o;if(!r[n+"Scrollbar"]){r[n+"ScrollbarWrapper"]&&(i&&(r[n+"ScrollbarIndicator"].style[t+"Transform"]=""),r[n+"ScrollbarWrapper"].parentNode.removeChild(r[n+"ScrollbarWrapper"]),r[n+"ScrollbarWrapper"]=null,r[n+"ScrollbarIndicator"]=null);return}r[n+"ScrollbarWrapper"]||(o=s.createElement("div"),r.options.scrollbarClass?o.className=r.options.scrollbarClass+n.toUpperCase():o.style.cssText="position:absolute;z-index:100;"+(n=="h"?"height:7px;bottom:1px;left:2px;right:"+(r.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(r.hScrollbar?"7":"2")+"px;top:2px;right:1px"),o.style.cssText+=";pointer-events:none;-"+t+"-transition-property:opacity;-"+t+"-transition-duration:"+(r.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(r.options.hideScrollbar?"0":"1"),r.wrapper.appendChild(o),r[n+"ScrollbarWrapper"]=o,o=s.createElement("div"),r.options.scrollbarClass||(o.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+t+"-background-clip:padding-box;-"+t+"-box-sizing:border-box;"+(n=="h"?"height:100%":"width:100%")+";-"+t+"-border-radius:3px;border-radius:3px"),o.style.cssText+=";pointer-events:none;-"+t+"-transition-property:-"+t+"-transform;-"+t+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+t+"-transition-duration:0;-"+t+"-transform:"+g+"0,0"+y,r.options.useTransition&&(o.style.cssText+=";-"+t+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),r[n+"ScrollbarWrapper"].appendChild(o),r[n+"ScrollbarIndicator"]=o),n=="h"?(r.hScrollbarSize=r.hScrollbarWrapper.clientWidth,r.hScrollbarIndicatorSize=e.max(e.round(r.hScrollbarSize*r.hScrollbarSize/r.scrollerW),8),r.hScrollbarIndicator.style.width=r.hScrollbarIndicatorSize+"px",r.hScrollbarMaxScroll=r.hScrollbarSize-r.hScrollbarIndicatorSize,r.hScrollbarProp=r.hScrollbarMaxScroll/r.maxScrollX):(r.vScrollbarSize=r.vScrollbarWrapper.clientHeight,r.vScrollbarIndicatorSize=e.max(e.round(r.vScrollbarSize*r.vScrollbarSize/r.scrollerH),8),r.vScrollbarIndicator.style.height=r.vScrollbarIndicatorSize+"px",r.vScrollbarMaxScroll=r.vScrollbarSize-r.vScrollbarIndicatorSize,r.vScrollbarProp=r.vScrollbarMaxScroll/r.maxScrollY),r._scrollbarPos(n,!0)},_resize:function(){var e=this;setTimeout(function(){e.refresh()},s?200:0)},_pos:function(n,r){n=this.hScroll?n:0,r=this.vScroll?r:0;if(this.options.roundPosition||!this.options.useTransform)n=e.round(n),r=e.round(r);this.options.useTransform?this.scroller.style[t+"Transform"]=g+n+"px,"+r+"px"+y+" scale("+this.scale+")":(this.scroller.style.left=n+"px",this.scroller.style.top=r+"px"),this.x=n,this.y=r,this._scrollbarPos("h"),this._scrollbarPos("v")},_scrollbarPos:function(n,r){var i=this,s=n=="h"?i.x:i.y,o;if(!i[n+"Scrollbar"])return;s=i[n+"ScrollbarProp"]*s,s<0?(i.options.fixedScrollbar||(o=i[n+"ScrollbarIndicatorSize"]+e.round(s*3),o<8&&(o=8),i[n+"ScrollbarIndicator"].style[n=="h"?"width":"height"]=o+"px"),s=0):s>i[n+"ScrollbarMaxScroll"]&&(i.options.fixedScrollbar?s=i[n+"ScrollbarMaxScroll"]:(o=i[n+"ScrollbarIndicatorSize"]-e.round((s-i[n+"ScrollbarMaxScroll"])*3),o<8&&(o=8),i[n+"ScrollbarIndicator"].style[n=="h"?"width":"height"]=o+"px",s=i[n+"ScrollbarMaxScroll"]+(i[n+"ScrollbarIndicatorSize"]-o))),i[n+"ScrollbarWrapper"].style[t+"TransitionDelay"]="0",i[n+"ScrollbarWrapper"].style.opacity=r&&i.options.hideScrollbar?"0":"1",i[n+"ScrollbarIndicator"].style[t+"Transform"]=g+(n=="h"?s+"px,0":"0,"+s+"px")+y},_start:function(n){var i=this,s=r?n.touches[0]:n,o,u,a,f,c;if(!i.enabled)return;i.options.onBeforeScrollStart&&i.options.onBeforeScrollStart.call(i,n),(i.options.useTransition||i.options.zoom)&&i._transitionTime(0),i.moved=!1,i.animating=!1,i.zoomed=!1,i.distX=0,i.distY=0,i.absDistX=0,i.absDistY=0,i.dirX=0,i.dirY=0,i.options.zoom&&r&&n.touches.length>1&&(f=e.abs(n.touches[0].pageX-n.touches[1].pageX),c=e.abs(n.touches[0].pageY-n.touches[1].pageY),i.touchesDistStart=e.sqrt(f*f+c*c),i.originX=e.abs(n.touches[0].pageX+n.touches[1].pageX-i.wrapperOffsetLeft*2)/2-i.x,i.originY=e.abs(n.touches[0].pageY+n.touches[1].pageY-i.wrapperOffsetTop*2)/2-i.y,i.options.onZoomStart&&i.options.onZoomStart.call(i,n));if(i.options.momentum){i.options.useTransform?(o=getComputedStyle(i.scroller,null)[t+"Transform"].replace(/[^0-9-.,]/g,"").split(","),u=o[4]*1,a=o[5]*1):(u=getComputedStyle(i.scroller,null).left.replace(/[^0-9-]/g,"")*1,a=getComputedStyle(i.scroller,null).top.replace(/[^0-9-]/g,"")*1);if(u!=i.x||a!=i.y)i.options.useTransition?i._unbind("webkitTransitionEnd"):l(i.aniTime),i.steps=[],i._pos(u,a)}i.absStartX=i.x,i.absStartY=i.y,i.startX=i.x,i.startY=i.y,i.pointX=s.pageX,i.pointY=s.pageY,i.startTime=n.timeStamp||(new Date).getTime(),i.options.onScrollStart&&i.options.onScrollStart.call(i,n),i._bind(p),i._bind(d),i._bind(v)},_move:function(n){var i=this,s=r?n.touches[0]:n,o=s.pageX-i.pointX,u=s.pageY-i.pointY,a=i.x+o,f=i.y+u,l,c,h,p=n.timeStamp||(new Date).getTime();i.options.onBeforeScrollMove&&i.options.onBeforeScrollMove.call(i,n);if(i.options.zoom&&r&&n.touches.length>1){l=e.abs(n.touches[0].pageX-n.touches[1].pageX),c=e.abs(n.touches[0].pageY-n.touches[1].pageY),i.touchesDist=e.sqrt(l*l+c*c),i.zoomed=!0,h=1/i.touchesDistStart*i.touchesDist*this.scale,h<i.options.zoomMin?h=.5*i.options.zoomMin*Math.pow(2,h/i.options.zoomMin):h>i.options.zoomMax&&(h=2*i.options.zoomMax*Math.pow(.5,i.options.zoomMax/h)),i.lastScale=h/this.scale,a=this.originX-this.originX*i.lastScale+this.x,f=this.originY-this.originY*i.lastScale+this.y,this.scroller.style[t+"Transform"]=g+a+"px,"+f+"px"+y+" scale("+h+")",i.options.onZoom&&i.options.onZoom.call(i,n);return}i.pointX=s.pageX,i.pointY=s.pageY;if(a>0||a<i.maxScrollX)a=i.options.bounce?i.x+o/2:a>=0||i.maxScrollX>=0?0:i.maxScrollX;if(f>i.minScrollY||f<i.maxScrollY)f=i.options.bounce?i.y+u/2:f>=i.minScrollY||i.maxScrollY>=0?i.minScrollY:i.maxScrollY;if(i.absDistX<6&&i.absDistY<6){i.distX+=o,i.distY+=u,i.absDistX=e.abs(i.distX),i.absDistY=e.abs(i.distY);return}i.options.lockDirection&&(i.absDistX>i.absDistY+5?(f=i.y,u=0):i.absDistY>i.absDistX+5&&(a=i.x,o=0)),i.moved=!0,i._pos(a,f),i.dirX=o>0?-1:o<0?1:0,i.dirY=u>0?-1:u<0?1:0,p-i.startTime>300&&(i.startTime=p,i.startX=i.x,i.startY=i.y),i.options.onScrollMove&&i.options.onScrollMove.call(i,n)},_end:function(n){if(r&&n.touches.length!=0)return;var i=this,s=r?n.changedTouches[0]:n,o,u,a={dist:0,time:0},f={dist:0,time:0},l=(n.timeStamp||(new Date).getTime())-i.startTime,c=i.x,h=i.y,m,b,w,E,S;i._unbind(p),i._unbind(d),i._unbind(v),i.options.onBeforeScrollEnd&&i.options.onBeforeScrollEnd.call(i,n);if(i.zoomed){S=i.scale*i.lastScale,S=Math.max(i.options.zoomMin,S),S=Math.min(i.options.zoomMax,S),i.lastScale=S/i.scale,i.scale=S,i.x=i.originX-i.originX*i.lastScale+i.x,i.y=i.originY-i.originY*i.lastScale+i.y,i.scroller.style[t+"TransitionDuration"]="200ms",i.scroller.style[t+"Transform"]=g+i.x+"px,"+i.y+"px"+y+" scale("+i.scale+")",i.zoomed=!1,i.refresh(),i.options.onZoomEnd&&i.options.onZoomEnd.call(i,n);return}if(!i.moved){r&&(i.doubleTapTimer&&i.options.zoom?(clearTimeout(i.doubleTapTimer),i.doubleTapTimer=null,i.options.onZoomStart&&i.options.onZoomStart.call(i,n),i.zoom(i.pointX,i.pointY,i.scale==1?i.options.doubleTapZoom:1),i.options.onZoomEnd&&setTimeout(function(){i.options.onZoomEnd.call(i,n)},200)):i.doubleTapTimer=setTimeout(function(){i.doubleTapTimer=null,o=s.target;while(o.nodeType!=1)o=o.parentNode;o.tagName!="SELECT"&&o.tagName!="INPUT"&&o.tagName!="TEXTAREA"&&(u=document.createEvent("MouseEvents"),u.initMouseEvent("click",!0,!0,n.view,1,s.screenX,s.screenY,s.clientX,s.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,0,null),u._fake=!0,o.dispatchEvent(u))},i.options.zoom?250:0)),i._resetPos(200),i.options.onTouchEnd&&i.options.onTouchEnd.call(i,n);return}if(l<300&&i.options.momentum){a=c?i._momentum(c-i.startX,l,-i.x,i.scrollerW-i.wrapperW+i.x,i.options.bounce?i.wrapperW:0):a,f=h?i._momentum(h-i.startY,l,-i.y,i.maxScrollY<0?i.scrollerH-i.wrapperH+i.y-i.minScrollY:0,i.options.bounce?i.wrapperH:0):f,c=i.x+a.dist,h=i.y+f.dist;if(i.x>0&&c>0||i.x<i.maxScrollX&&c<i.maxScrollX)a={dist:0,time:0};if(i.y>i.minScrollY&&h>i.minScrollY||i.y<i.maxScrollY&&h<i.maxScrollY)f={dist:0,time:0}}if(a.dist||f.dist){w=e.max(e.max(a.time,f.time),10),i.options.snap&&(m=c-i.absStartX,b=h-i.absStartY,e.abs(m)<i.options.snapThreshold&&e.abs(b)<i.options.snapThreshold?i.scrollTo(i.absStartX,i.absStartY,200):(E=i._snap(c,h),c=E.x,h=E.y,w=e.max(E.time,w))),i.scrollTo(c,h,w),i.options.onTouchEnd&&i.options.onTouchEnd.call(i,n);return}if(i.options.snap){m=c-i.absStartX,b=h-i.absStartY,e.abs(m)<i.options.snapThreshold&&e.abs(b)<i.options.snapThreshold?i.scrollTo(i.absStartX,i.absStartY,200):(E=i._snap(i.x,i.y),(E.x!=i.x||E.y!=i.y)&&i.scrollTo(E.x,E.y,E.time)),i.options.onTouchEnd&&i.options.onTouchEnd.call(i,n);return}i._resetPos(200),i.options.onTouchEnd&&i.options.onTouchEnd.call(i,n)},_resetPos:function(e){var n=this,r=n.x>=0?0:n.x<n.maxScrollX?n.maxScrollX:n.x,i=n.y>=n.minScrollY||n.maxScrollY>0?n.minScrollY:n.y<n.maxScrollY?n.maxScrollY:n.y;if(r==n.x&&i==n.y){n.moved&&(n.moved=!1,n.options.onScrollEnd&&n.options.onScrollEnd.call(n)),n.hScrollbar&&n.options.hideScrollbar&&(t=="webkit"&&(n.hScrollbarWrapper.style[t+"TransitionDelay"]="300ms"),n.hScrollbarWrapper.style.opacity="0"),n.vScrollbar&&n.options.hideScrollbar&&(t=="webkit"&&(n.vScrollbarWrapper.style[t+"TransitionDelay"]="300ms"),n.vScrollbarWrapper.style.opacity="0");return}n.scrollTo(r,i,e||0)},_wheel:function(e){var t=this,n,r,i,s,o;"wheelDeltaX"in e?(n=e.wheelDeltaX/12,r=e.wheelDeltaY/12):"detail"in e?n=r=-e.detail*3:n=r=-e.wheelDelta;if(t.options.wheelAction=="zoom"){o=t.scale*Math.pow(2,1/3*(r?r/Math.abs(r):0)),o<t.options.zoomMin&&(o=t.options.zoomMin),o>t.options.zoomMax&&(o=t.options.zoomMax),o!=t.scale&&(!t.wheelZoomCount&&t.options.onZoomStart&&t.options.onZoomStart.call(t,e),t.wheelZoomCount++,t.zoom(e.pageX,e.pageY,o,400),setTimeout(function(){t.wheelZoomCount--,!t.wheelZoomCount&&t.options.onZoomEnd&&t.options.onZoomEnd.call(t,e)},400));return}i=t.x+n,s=t.y+r,i>0?i=0:i<t.maxScrollX&&(i=t.maxScrollX),s>t.minScrollY?s=t.minScrollY:s<t.maxScrollY&&(s=t.maxScrollY),t.scrollTo(i,s,0)},_mouseout:function(e){var t=e.relatedTarget;if(!t){this._end(e);return}while(t=t.parentNode)if(t==this.wrapper)return;this._end(e)},_transitionEnd:function(e){var t=this;if(e.target!=t.scroller)return;t._unbind("webkitTransitionEnd"),t._startAni()},_startAni:function(){var t=this,n=t.x,r=t.y,i=(new Date).getTime(),s,o;if(t.animating)return;if(!t.steps.length){t._resetPos(400);return}s=t.steps.shift(),s.x==n&&s.y==r&&(s.time=0),t.animating=!0,t.moved=!0;if(t.options.useTransition){t._transitionTime(s.time),t._pos(s.x,s.y),t.animating=!1,s.time?t._bind("webkitTransitionEnd"):t._resetPos(0);return}(function u(){var a=(new Date).getTime(),l,c;if(a>=i+s.time){t._pos(s.x,s.y),t.animating=!1,t.options.onAnimationEnd&&t.options.onAnimationEnd.call(t),t._startAni();return}a=(a-i)/s.time-1,o=e.sqrt(1-a*a),l=(s.x-n)*o+n,c=(s.y-r)*o+r,t._pos(l,c),t.animating&&(t.aniTime=f(u))})()},_transitionTime:function(e){e+="ms",this.scroller.style[t+"TransitionDuration"]=e,this.hScrollbar&&(this.hScrollbarIndicator.style[t+"TransitionDuration"]=e),this.vScrollbar&&(this.vScrollbarIndicator.style[t+"TransitionDuration"]=e)},_momentum:function(t,n,r,i,s){var o=6e-4,u=e.abs(t)/n,a=u*u/(2*o),f=0,l=0;return t>0&&a>r?(l=s/(6/(a/u*o)),r+=l,u=u*r/a,a=r):t<0&&a>i&&(l=s/(6/(a/u*o)),i+=l,u=u*i/a,a=i),a*=t<0?-1:1,f=u/o,{dist:a,time:e.round(f)}},_offset:function(e){var t=-e.offsetLeft,n=-e.offsetTop;while(e=e.offsetParent)t-=e.offsetLeft,n-=e.offsetTop;return e!=this.wrapper&&(t*=this.scale,n*=this.scale),{left:t,top:n}},_snap:function(t,n){var r=this,i,s,o,u,a,f;o=r.pagesX.length-1;for(i=0,s=r.pagesX.length;i<s;i++)if(t>=r.pagesX[i]){o=i;break}o==r.currPageX&&o>0&&r.dirX<0&&o--,t=r.pagesX[o],a=e.abs(t-r.pagesX[r.currPageX]),a=a?e.abs(r.x-t)/a*500:0,r.currPageX=o,o=r.pagesY.length-1;for(i=0;i<o;i++)if(n>=r.pagesY[i]){o=i;break}return o==r.currPageY&&o>0&&r.dirY<0&&o--,n=r.pagesY[o],f=e.abs(n-r.pagesY[r.currPageY]),f=f?e.abs(r.y-n)/f*500:0,r.currPageY=o,u=e.round(e.max(a,f))||200,{x:t,y:n,time:u}},_bind:function(e,t,n){(t||this.scroller).addEventListener(e,this,!!n)},_unbind:function(e,t,n){(t||this.scroller).removeEventListener(e,this,!!n)},destroy:function(){var e=this;e.scroller.style[t+"Transform"]="",e.hScrollbar=!1,e.vScrollbar=!1,e._scrollbar("h"),e._scrollbar("v"),e._unbind(c,window),e._unbind(h),e._unbind(p),e._unbind(d),e._unbind(v),e.options.hasTouch&&(e._unbind("mouseout",e.wrapper),e._unbind(m)),e.options.useTransition&&e._unbind("webkitTransitionEnd"),e.options.checkDOMChanges&&clearInterval(e.checkDOMTime),e.options.onDestroy&&e.options.onDestroy.call(e)},refresh:function(){var n=this,r,i,s,o,u=0,a=0;n.scale<n.options.zoomMin&&(n.scale=n.options.zoomMin),n.wrapperW=n.wrapper.clientWidth||1,n.wrapperH=n.wrapper.clientHeight||1,n.minScrollY=-n.options.topOffset||0,n.scrollerW=e.round(n.scroller.offsetWidth*n.scale),n.scrollerH=e.round((n.scroller.offsetHeight+n.minScrollY)*n.scale),n.maxScrollX=n.wrapperW-n.scrollerW,n.maxScrollY=n.wrapperH-n.scrollerH+n.minScrollY,n.dirX=0,n.dirY=0,n.options.onRefresh&&n.options.onRefresh.call(n),n.hScroll=n.options.hScroll&&n.maxScrollX<0,n.vScroll=n.options.vScroll&&(!n.options.bounceLock&&!n.hScroll||n.scrollerH>n.wrapperH),n.hScrollbar=n.hScroll&&n.options.hScrollbar,n.vScrollbar=n.vScroll&&n.options.vScrollbar&&n.scrollerH>n.wrapperH,r=n._offset(n.wrapper),n.wrapperOffsetLeft=-r.left,n.wrapperOffsetTop=-r.top;if(typeof n.options.snap=="string"){n.pagesX=[],n.pagesY=[],o=n.scroller.querySelectorAll(n.options.snap);for(i=0,s=o.length;i<s;i++)u=n._offset(o[i]),u.left+=n.wrapperOffsetLeft,u.top+=n.wrapperOffsetTop,n.pagesX[i]=u.left<n.maxScrollX?n.maxScrollX:u.left*n.scale,n.pagesY[i]=u.top<n.maxScrollY?n.maxScrollY:u.top*n.scale}else if(n.options.snap){n.pagesX=[];while(u>=n.maxScrollX)n.pagesX[a]=u,u-=n.wrapperW,a++;n.maxScrollX%n.wrapperW&&(n.pagesX[n.pagesX.length]=n.maxScrollX-n.pagesX[n.pagesX.length-1]+n.pagesX[n.pagesX.length-1]),u=0,a=0,n.pagesY=[];while(u>=n.maxScrollY)n.pagesY[a]=u,u-=n.wrapperH,a++;n.maxScrollY%n.wrapperH&&(n.pagesY[n.pagesY.length]=n.maxScrollY-n.pagesY[n.pagesY.length-1]+n.pagesY[n.pagesY.length-1])}n._scrollbar("h"),n._scrollbar("v"),n.zoomed||(n.scroller.style[t+"TransitionDuration"]="0",n._resetPos(200))},scrollTo:function(e,t,n,r){var i=this,s=e,o,u;i.stop(),s.length||(s=[{x:e,y:t,time:n,relative:r}]);for(o=0,u=s.length;o<u;o++)s[o].relative&&(s[o].x=i.x-s[o].x,s[o].y=i.y-s[o].y),i.steps.push({x:s[o].x,y:s[o].y,time:s[o].time||0});i._startAni()},scrollToElement:function(t,n){var r=this,i;t=t.nodeType?t:r.scroller.querySelector(t);if(!t)return;i=r._offset(t),i.left+=r.wrapperOffsetLeft,i.top+=r.wrapperOffsetTop,i.left=i.left>0?0:i.left<r.maxScrollX?r.maxScrollX:i.left,i.top=i.top>r.minScrollY?r.minScrollY:i.top<r.maxScrollY?r.maxScrollY:i.top,n=n===undefined?e.max(e.abs(i.left)*2,e.abs(i.top)*2):n,r.scrollTo(i.left,i.top,n)},scrollToPage:function(e,t,n){var r=this,i,s;r.options.snap?(e=e=="next"?r.currPageX+1:e=="prev"?r.currPageX-1:e,t=t=="next"?r.currPageY+1:t=="prev"?r.currPageY-1:t,e=e<0?0:e>r.pagesX.length-1?r.pagesX.length-1:e,t=t<0?0:t>r.pagesY.length-1?r.pagesY.length-1:t,r.currPageX=e,r.currPageY=t,i=r.pagesX[e],s=r.pagesY[t]):(i=-r.wrapperW*e,s=-r.wrapperH*t,i<r.maxScrollX&&(i=r.maxScrollX),s<r.maxScrollY&&(s=r.maxScrollY)),r.scrollTo(i,s,n||400)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(p),this._unbind(d),this._unbind(v)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind("webkitTransitionEnd"):l(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(e,n,r,i){var s=this,o=r/s.scale;if(!s.options.useTransform)return;s.zoomed=!0,i=i===undefined?200:i,e=e-s.wrapperOffsetLeft-s.x,n=n-s.wrapperOffsetTop-s.y,s.x=e-e*o+s.x,s.y=n-n*o+s.y,s.scale=r,s.refresh(),s.x=s.x>0?0:s.x<s.maxScrollX?s.maxScrollX:s.x,s.y=s.y>s.minScrollY?s.minScrollY:s.y<s.maxScrollY?s.maxScrollY:s.y,s.scroller.style[t+"TransitionDuration"]=i+"ms",s.scroller.style[t+"Transform"]=g+s.x+"px,"+s.y+"px"+y+" scale("+r+")",s.zoomed=!1},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},typeof exports!="undefined"?exports.iScroll=b:window.iScroll=b}(),n("lib/iscroll-4.1.9",function(){}),n("lib/iscroll",["lib/iscroll-4.1.9"],function(){var e=window.iScroll;return delete window.iScroll,e}),n("viewModel/util",["require","lib/jquery","lib/knockout"],function(e){var t=e("lib/jquery"),n=e("lib/knockout"),r={};return{registerFactory:function(e,t){r[e]=t},hydrateObject:function i(e){if(e instanceof Object){var s,o,u,a=new r[e.factoryName];for(s in e){if(s==="template"||s==="factoryName"||s===undefined)continue;u=e[s],a[s]instanceof Function?(o=n.utils.unwrapObservable(a[s]),a[s]!==o&&(o instanceof Array?t.each(u,function(){a[s].push(i(this))}):a[s](u))):a[s]=i(u)}return a}return e}}}),n("viewModel/ApplicationViewModel",["require","lib/jquery","lib/knockout","viewModel/util"],function(e){function i(){var e=this;this.viewModelBackStack=n.observableArray(),this.backButtonRequired=n.computed(function(){return this.viewModelBackStack().length>1},this),this.currentViewModel=n.computed(function(){return this.viewModelBackStack()[this.viewModelBackStack().length-1]},this),this.currentView=n.computed(function(){var e="";return this.viewModelBackStack().length!==0&&(e=this.viewModelBackStack()[this.viewModelBackStack().length-1].template),e},this),this.navigateTo=function(e){this.viewModelBackStack.push(e)},this.back=function(){this.viewModelBackStack.pop()},this.getState=function(){var t,r,i=n.observableArray();for(t=0;t<e.viewModelBackStack().length;t++)r=e.viewModelBackStack()[t],i.push(r);return n.toJSON(i)},this.setState=function(n){var i,s,o=t.parseJSON(n);e.viewModelBackStack.removeAll();for(i=0;i<o.length;i++)s=r.hydrateObject(o[i]),e.viewModelBackStack.push(s)}}var t=e("lib/jquery"),n=e("lib/knockout"),r=e("viewModel/util");return i.Instance=new i,i}),n("model/PropertySearchResponseCode",[],function(){return{propertiesFound:1,ambiguousLocation:2,unknownLocation:3}}),n("model/Property",[],function(){return function(e){this.guid=e.guid,this.price=e.price,this.bedrooms=e.bedrooms,this.bathrooms=e.bathrooms,this.propertyType=e.propertyType,this.title=e.title,this.thumbnailUrl=e.thumbnailUrl,this.imgUrl=e.imgUrl}}),n("model/Location",[],function(){return function(e){this.longTitle=e.longTitle,this.placeName=e.placeName}}),n("model/PropertyDataSourceResponse",[],function(){return function(e){this.responseCode=e.responseCode,this.data=e.data,this.totalResults=e.totalResults,this.pageNumber=e.pageNumber}}),function(e,t){function n(){}function r(e){N=[e]}function i(e){S.insertBefore(e,S.firstChild)}function s(e,t,n){return e&&e.apply(t.context||t,n)}function o(e){return/\?/.test(e)?"&":"?"}function k(h){function W(e){!(R++)&&t(function(){U(),D&&(x[H]={s:[e]}),L&&(e=L.apply(h,[e])),s(h.success,h,[e,b]),s(k,h,[h,b])},0)}function X(e){!(R++)&&t(function(){U(),D&&e!=w&&(x[H]=e),s(h.error,h,[h,e]),s(k,h,[h,e])},0)}h=e.extend({},C,h);var k=h.complete,L=h.dataFilter,O=h.callbackParameter,M=h.callback,_=h.cache,D=h.pageCache,P=h.charset,H=h.url,B=h.data,F=h.timeout,I,R=0,U=n;return h.abort=function(){!(R++)&&U()},s(h.beforeSend,h,[h])===!1||R?h:(H=H||f,B=B?typeof B=="string"?B:e.param(B,h.traditional):f,H+=B?o(H)+B:f,O&&(H+=o(H)+encodeURIComponent(O)+"=?"),!_&&!D&&(H+=o(H)+"_"+(new Date).getTime()+"="),H=H.replace(/=\?(&|$)/,"="+M+"$1"),D&&(I=x[H])?I.s?W(I.s[0]):X(I):t(function(s,o,f){if(!R){f=F>0&&t(function(){X(w)},F),U=function(){f&&clearTimeout(f),s[m]=s[p]=s[v]=s[d]=null,S[g](s),o&&S[g](o)},window[M]=r,s=e(y)[0],s.id=c+T++,P&&(s[a]=P);function h(e){(s[p]||n)(),e=N,N=undefined,e?W(e[0]):X(l)}E.msie?(s.event=p,s.htmlFor=s.id,s[m]=function(){/loaded|complete/.test(s.readyState)&&h()}):(s[d]=s[v]=h,E.opera?(o=e(y)[0]).text="jQuery('#"+s.id+"')[0]."+d+"()":s[u]=u),s.src=H,i(s),o&&i(o)}},0),h)}var u="async",a="charset",f="",l="error",c="_jqjsp",h="on",p=h+"click",d=h+l,v=h+"load",m=h+"readystatechange",g="removeChild",y="<script/>",b="success",w="timeout",E=e.browser,S=e("head")[0]||document.documentElement,x={},T=0,N,C={callback:c,url:location.href};k.setup=function(t){e.extend(C,t)},e.jsonp=k}(jQuery,setTimeout),n("lib/jquery.jsonp-2.1.4.min",function(){}),n("lib/jquery.jsonp",["lib/jquery.jsonp-2.1.4.min"],function(){}),n("model/JSONDataSource",["require","lib/jquery","lib/jquery.jsonp"],function(e){var t=e("lib/jquery");return e("lib/jquery.jsonp"),function(){function e(e,n,r,i){t.jsonp({dataType:"jsonp",data:n,url:e,timeout:5e3,success:function(e){r(e)},error:function(e,t,n){i("datasource error ["+t+"] ["+n+"]")}})}this.findProperties=function(t,n,r,i){var s="http://api.nestoria.co.uk/api",o={country:"uk",pretty:"1",action:"search_listings",encoding:"json",listing_type:"buy",page:n,place_name:t,callback:"_jqjsp"};e(s,o,r,i)},this.findPropertiesByCoordinate=function(t,n,r,i,s){var o="http://api.nestoria.co.uk/api",u={country:"uk",pretty:"1",action:"search_listings",encoding:"json",listing_type:"buy",page:r,centre_point:t+","+n,callback:"_jqjsp"};e(o,u,i,s)}}}),n("model/PropertyDataSource",["require","lib/jquery","model/Property","model/Location","model/PropertyDataSourceResponse","model/PropertySearchResponseCode","model/JSONDataSource"],function(e){function u(e){function u(e){var o=[],u=[],a=e.response.application_response_code,f,l,c;return a==="100"||a==="101"||a==="110"?(t.each(e.response.listings,function(e,t){f=new n({guid:t.guid,title:t.title,price:t.price_formatted.substr(0,t.price_formatted.lastIndexOf(" ")),bedrooms:t.bedroom_number,bathrooms:t.bathroom_number,propertyType:t.property_type,thumbnailUrl:t.img_url,summary:t.summary}),o.push(f)}),c=new i({responseCode:s.propertiesFound,data:o,totalResults:e.response.total_results,pageNumber:e.response.page})):a==="200"||a==="202"?(t.each(e.response.locations,function(e,t){l=new r({longTitle:t.long_title,placeName:t.place_name,title:t.title}),u.push(l)}),c=new i({responseCode:s.ambiguousLocation,data:u})):c=new i({responseCode:s.unknownLocation}),c}this.jsonDataSource=new o,this.findProperties=function(e,t,n,r){this.jsonDataSource.findProperties(e,t,function(e){n(u(e))},r)},this.findPropertiesByCoordinate=function(e,t,n,r,i){this.jsonDataSource.findPropertiesByCoordinate(e,t,n,function(e){r(u(e))},i)}}var t=e("lib/jquery"),n=e("model/Property"),r=e("model/Location"),i=e("model/PropertyDataSourceResponse"),s=e("model/PropertySearchResponseCode"),o=e("model/JSONDataSource");return u.Instance=new u,u}),n("viewModel/LocationViewModel",["require","lib/knockout","model/PropertyDataSource","viewModel/util"],function(e){function i(){this.factoryName="LocationViewModel",this.searchString=undefined,this.displayString=undefined,this.firstElement=t.observable(!1),this.lastElement=t.observable(!1),this.totalResults=0,this.initialise=function(e){this.searchString=e,this.displayString=e},this.initialiseDisambiguated=function(e){this.searchString=e.placeName,this.displayString=e.longTitle},this.executeSearch=function(e,t,r){n.findProperties(this.searchString,e,t,r)}}var t=e("lib/knockout"),n=e("model/PropertyDataSource").Instance,r=e("viewModel/util");return r.registerFactory("LocationViewModel",i),i}),n("viewModel/PropertyViewModel",["require","lib/knockout","viewModel/ApplicationViewModel","viewModel/util"],function(e){function i(){var e;this.template="propertyView",this.factoryName="PropertyViewModel",this.price=undefined,this.bedrooms=undefined,this.bathrooms=undefined,this.propertyType=undefined,this.thumbnailUrl=undefined,this.guid=undefined,this.summary=undefined,this.title=undefined,this.isFavourite=t.observable(!1),this.initialize=function(t){this.price=t.price,this.bedrooms=t.bedrooms,this.bathrooms=t.bathrooms,this.propertyType=t.propertyType,this.thumbnailUrl=t.thumbnailUrl,this.guid=t.guid,this.summary=t.summary,t.title&&(e=t.title.split(","),e.length>=2&&(this.title=e[0]+", "+e[1]))},this.select=function(){n.navigateTo(this)}}var t=e("lib/knockout"),n=e("viewModel/ApplicationViewModel").Instance,r=e("viewModel/util");return r.registerFactory("PropertyViewModel",i),i}),n("viewModel/SearchResultsViewModel",["require","lib/jquery","lib/knockout","./PropertyViewModel","./util"],function(e){function s(){var e=this;this.template="searchResultsView",this.factoryName="SearchResultsViewModel",this.isLoading=n.observable(!1),this.totalResults=undefined,this.pageNumber=n.observable(1),this.searchLocation=undefined,this.properties=n.observableArray(),this.initialize=function(n,i){t.each(i.data,function(){var t=new r;t.initialize(this),e.properties.push(t)}),e.searchLocation=n,e.totalResults=i.totalResults},this.loadMore=function(){this.pageNumber(this.pageNumber()+1),this.isLoading(!0),this.searchLocation.executeSearch(this.pageNumber(),function(n){e.isLoading(!1),t.each(n.data,function(){var t=new r;t.initialize(this),e.properties.push(t)}),e.pageNumber(e.pageNumber()+1)})}}var t=e("lib/jquery"),n=e("lib/knockout"),r=e("./PropertyViewModel"),i=e("./util");return i.registerFactory("SearchResultsViewModel",s),s}),n("viewModel/GeolocationViewModel",["require","lib/knockout","model/PropertyDataSource","viewModel/util"],function(e){function i(){this.factoryName="GeolocationViewModel",this.lat=undefined,this.lon=undefined,this.firstElement=t.observable(!1),this.lastElement=t.observable(!1),this.displayString=undefined,this.totalResults=0,this.initialise=function(e,t){this.lat=e,this.lon=t,this.displayString=e.toFixed(2)+", "+t.toFixed(2)},this.executeSearch=function(e,t,r){n.findPropertiesByCoordinate(this.lat,this.lon,e,t,r)}}var t=e("lib/knockout"),n=e("model/PropertyDataSource").Instance,r=e("viewModel/util");return r.registerFactory("GeolocationViewModel",i),i}),n("viewModel/FavouritesViewModel",["require","viewModel/util"],function(e){function n(e){this.template="favouritesView",this.factoryName="FavouritesViewModel",this.properties=e.favourites}var t=e("viewModel/util");return t.registerFactory("FavouritesViewModel",n),n}),n("viewModel/AboutViewModel",["require","viewModel/util"],function(e){function n(e){this.template="aboutView",this.factoryName="AboutViewModel",this.locationEnabled=e.locationEnabled}var t=e("viewModel/util");return t.registerFactory("AboutViewModel",n),n}),n("viewModel/PropertySearchViewModel",["require","lib/jquery","lib/knockout","viewModel/ApplicationViewModel","model/PropertySearchResponseCode","viewModel/LocationViewModel","viewModel/SearchResultsViewModel","viewModel/GeolocationViewModel","viewModel/FavouritesViewModel","viewModel/AboutViewModel","viewModel/util"],function(e){function c(){var e=!0,l=this;this.template="propertySearchView",this.factoryName="PropertySearchViewModel",this.maxRecentSearch=5,this.searchDisplayString=n.observable(""),this.userMessage=n.observable(),this.searchLocation=undefined,this.isSearchEnabled=n.observable(!0),this.locationEnabled=n.observable(!0),this.locations=n.observableArray(),this.favourites=n.observableArray(),this.recentSearches=n.observableArray(),this.searchDisplayString.subscribe(function(){if(e){var t=new s;t.initialise(l.searchDisplayString()),l.searchLocation=t}}),this.executeSearch=function(){function e(e){l.userMessage("An error occurred while searching. Please check your network connection and try again."),l.isSearchEnabled(!0)}function n(e){if(e.responseCode===i.propertiesFound)if(e.totalResults===null)l.userMessage("There were no properties found for the given location.");else{l.searchLocation.totalResults=e.totalResults,l.updateRecentSearches();var n=new o;n.initialize(l.searchLocation,e),r.navigateTo(n)}else e.responseCode===i.ambiguousLocation?(l.locations.removeAll(),t.each(e.data,function(){var e=new s;e.initialiseDisambiguated(this),l.locations.push(e)}),l.updateListStyling(l.locations)):l.userMessage("The location given was not recognised.");l.isSearchEnabled(!0)}l.userMessage(""),l.isSearchEnabled(!1),this.searchLocation.executeSearch(1,n,e)},this.updateRecentSearches=function(){var e=!1;t.each(l.recentSearches(),function(){this.displayString===l.searchLocation.displayString&&(e=!0)});if(e)return;l.recentSearches().length>l.maxRecentSearch&&l.recentSearches.pop(),l.recentSearches.unshift(l.searchLocation),l.updateListStyling(l.recentSearches)},this.updateListStyling=function(e){var t;if(e())for(t=0;t<e().length;t++)e()[t].firstElement(t===0),e()[t].lastElement(t===e().length-1)},this.searchMyLocation=function(){function t(t){var n=new u;n.initialise(t.coords.latitude,t.coords.longitude),e=!1,l.searchLocation=n,l.searchDisplayString(n.displayString),e=!0,l.executeSearch()}function n(){l.userMessage("Unable to detect current location. Please ensure location is turned on in your phone settings and try again.")}if(this.locationEnabled()===!1){l.userMessage("The use of location is currently disabled. Please enable via the 'about' page.");return}navigator.geolocation.getCurrentPosition(t,n)},this.selectLocation=function(){var t=this;e=!1,l.searchLocation=t,l.searchDisplayString(t.displayString),e=!0,l.locations.removeAll(),l.executeSearch()},this.viewFavourites=function(){var e=new a(this);r.navigateTo(e)},this.viewAbout=function(){var e=new f(this);r.navigateTo(e)},this.getFavouriteByGuid=function(e){var n=null;return t.each(l.favourites(),function(){this.guid===e&&(n=this)}),n},this.addToFavourites=function(e){var t=this.getFavouriteByGuid(e.guid);t?(e.isFavourite(!1),this.favourites.remove(t)):(e.isFavourite(!0),this.favourites.push(e))}}var t=e("lib/jquery"),n=e("lib/knockout"),r=e("viewModel/ApplicationViewModel").Instance,i=e("model/PropertySearchResponseCode"),s=e("viewModel/LocationViewModel"),o=e("viewModel/SearchResultsViewModel"),u=e("viewModel/GeolocationViewModel"),a=e("viewModel/FavouritesViewModel"),f=e("viewModel/AboutViewModel"),l=e("viewModel/util");return l.registerFactory("PropertySearchViewModel",c),c}),n("app",["require","lib/jquery","lib/jquery.tmpl","lib/knockout","lib/iscroll","viewModel/PropertySearchViewModel","viewModel/util","viewModel/ApplicationViewModel"],function(e){function a(){t("img.ui-li-thumb:not(.shown)").bind("load",function(){t(this).addClass("shown")})}function f(e){var n=t.parseJSON(e);if(!n)return;n.favourites&&t.each(n.favourites,function(){propertySearchViewModel.favourites.push(s.hydrateObject(this))}),n.recentSearches&&t.each(n.recentSearches,function(){propertySearchViewModel.recentSearches.push(s.hydrateObject(this))}),propertySearchViewModel.updateListStyling(propertySearchViewModel.recentSearches)}function l(){var e={recentSearches:propertySearchViewModel.recentSearches,favourites:propertySearchViewModel.favourites},t=n.toJSON(e);localStorage.appState=t}function c(){var e=o.currentViewModel();e.properties().length<e.totalResults&&e.loadMore()}function h(e,n){t.each(e,function(){t(this).bind("touchstart",function(){t(this).addClass("ui-btn-down-"+n).removeClass("ui-btn-up-"+n)}),t(this).bind("touchend",function(){t(this).removeClass("ui-btn-down-"+n).addClass("ui-btn-up-"+n)})})}function p(e){a();var t=e.find(".iScrollWrapper"),n=e.find(".pullUp"),i,s,o;t.length>0&&(n.length>0?(s=n.get(0),o=n.attr("offsetHeight"),i=n.find(".pullUpLabel"),u=new r(t.get(0),{useTransition:!0,onRefresh:function(){n.hasClass("loading")&&(n.removeClass(),i.html("Pull up to load more..."))},onScrollMove:function(){this.y<this.maxScrollY-5&&!n.hasClass("flip")?(n.addClass("flip"),i.html("Release to refresh..."),this.maxScrollY=this.maxScrollY):this.y>this.maxScrollY+5&&n.hasClass("flip")&&(n.removeClass("flip"),i.html("Pull up to load more..."),this.maxScrollY=o)},onScrollEnd:function(){n.hasClass("flip")&&(n.addClass("loading"),i.html("Loading..."),c())}})):u=new r(t.get(0),{useTransition:!0})),h(e.find("div.ui-btn-up-c"),"c"),h(e.find("a.ui-btn-up-b"),"b")}function d(){window.propertySearchViewModel=new i,propertySearchViewModel.maxRecentSearch=3,n.applyBindings(o);var e=0;o.currentViewModel.subscribe(function(r){var i=o.viewModelBackStack().length,s;r!==undefined&&(e<i?(t(".ui-content").children().last().hide(),s=t("#"+r.template).tmpl().appendTo(".ui-content"),n.applyBindings(r,s.get(0)),p(s)):(t(".ui-content").children().last().remove(),t(".ui-content").children().last().show()),r.template==="searchResultsView"&&r.pageNumber.subscribe(function(){u.refresh(),a()})),e=i}),propertySearchViewModel.favourites.subscribe(l),propertySearchViewModel.recentSearches.subscribe(l);var r=localStorage.appState;r&&f(r),o.navigateTo(propertySearchViewModel)}var t=e("lib/jquery");e("lib/jquery.tmpl");var n=e("lib/knockout"),r=e("lib/iscroll"),i=e("viewModel/PropertySearchViewModel"),s=e("viewModel/util"),o=e("viewModel/ApplicationViewModel").Instance,u;t(function(){document.addEventListener("deviceready",d,!1),window.device||d()})}),t(["app"])})()